<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/%E6%9F%A0%E6%AA%AC%E5%B9%B2.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/%E8%8D%89%E8%8E%93.svg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/%E8%8D%89%E8%8E%93.svg">
  <link rel="mask-icon" href="/images/%E6%9F%A0%E6%AA%AC%E5%B9%B2.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yummy-zz.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Yum">
<meta property="og:url" content="https://yummy-zz.github.io/index.html">
<meta property="og:site_name" content="Yum">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Eden Yi">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://yummy-zz.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Yum</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <a target="_blank" rel="noopener" href="https://github.com/Yummy-zZ" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yum</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/20/42-vue3%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/20/42-vue3%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">42.vue3项目总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-20 10:43:27 / 修改时间：10:44:57" itemprop="dateCreated datePublished" datetime="2021-10-20T10:43:27+08:00">2021-10-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/20/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/20/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83/" class="post-title-link" itemprop="url">vue3项目实战-用户中心</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-20 09:41:57 / 修改时间：09:45:34" itemprop="dateCreated datePublished" datetime="2021-10-20T09:41:57+08:00">2021-10-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">项目实战</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="src-vies-user-center-user-center-vue"><a href="#src-vies-user-center-user-center-vue" class="headerlink" title="src/vies/user-center/user-center.vue"></a>src/vies/user-center/user-center.vue</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div</span><br><span class="line">    class=&quot;user-center&quot;</span><br><span class="line">    v-no-result:[noResultText]=&quot;noResult&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div class=&quot;back&quot; @click=&quot;back&quot;&gt;</span><br><span class="line">      &lt;i class=&quot;icon-back&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;switches-wrapper&quot;&gt;</span><br><span class="line">      &lt;switches</span><br><span class="line">        :items=&quot;[&#x27;我喜欢的&#x27;, &#x27;最近播放&#x27;]&quot;</span><br><span class="line">        v-model=&quot;currentIndex&quot;</span><br><span class="line">      &gt;&lt;/switches&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      class=&quot;play-btn&quot;</span><br><span class="line">      v-if=&quot;currentList.length&quot;</span><br><span class="line">      @click=&quot;random&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;i class=&quot;icon-play&quot;&gt;&lt;/i&gt;</span><br><span class="line">      &lt;span class=&quot;text&quot;&gt;随机播放全部&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;list-wrapper&quot;&gt;</span><br><span class="line">      &lt;scroll class=&quot;list-scroll&quot; v-if=&quot;currentIndex===0&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;list-inner&quot;&gt;</span><br><span class="line">          &lt;song-list</span><br><span class="line">            :songs=&quot;favoriteList&quot;</span><br><span class="line">            @select=&quot;selectSong&quot;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/song-list&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/scroll&gt;</span><br><span class="line">      &lt;scroll class=&quot;list-scroll&quot; v-if=&quot;currentIndex===1&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;list-inner&quot;&gt;</span><br><span class="line">          &lt;song-list</span><br><span class="line">            :songs=&quot;playHistory&quot;</span><br><span class="line">            @select=&quot;selectSong&quot;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/song-list&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/scroll&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState, mapActions &#125; from &#x27;vuex&#x27;</span><br><span class="line">// 组件</span><br><span class="line">import Switches from &#x27;../../components/base/switches/switches&#x27;</span><br><span class="line">import Scroll from &#x27;../../components/base/scroll/scroll&#x27;</span><br><span class="line">import SongList from &#x27;../../components/base/song-list/song-list&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;user-center&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      currentIndex: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    Switches,</span><br><span class="line">    Scroll,</span><br><span class="line">    SongList</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    noResult() &#123;</span><br><span class="line">      return this.currentIndex === 0 ? !this.favoriteList.length : !this.playHistory.length</span><br><span class="line">    &#125;,</span><br><span class="line">    noResultText() &#123;</span><br><span class="line">      return this.currentIndex === 0 ? &#x27;暂无收藏歌曲&#x27; : &#x27;你还没有听过歌曲&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    currentList() &#123;</span><br><span class="line">      return this.currentIndex === 0 ? this.favoriteList : this.playHistory</span><br><span class="line">    &#125;,</span><br><span class="line">    ...mapState([&#x27;favoriteList&#x27;, &#x27;playHistory&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    back() &#123;</span><br><span class="line">      this.$router.back()</span><br><span class="line">    &#125;,</span><br><span class="line">    selectSong(&#123; song &#125;) &#123;</span><br><span class="line">      this.addSong(song)</span><br><span class="line">    &#125;,</span><br><span class="line">    random() &#123;</span><br><span class="line">      this.randomPlay(this.currentList)</span><br><span class="line">    &#125;,</span><br><span class="line">    ...mapActions([&#x27;addSong&#x27;, &#x27;randomPlay&#x27;])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.user-center &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  z-index: 100;</span><br><span class="line">  width: 100%;</span><br><span class="line">  background: $color-background;</span><br><span class="line">  .back &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 6px;</span><br><span class="line">    z-index: 50;</span><br><span class="line">    .icon-back &#123;</span><br><span class="line">      display: block;</span><br><span class="line">      padding: 10px;</span><br><span class="line">      font-size: $font-size-large-x;</span><br><span class="line">      color: $color-theme;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .switches-wrapper &#123;</span><br><span class="line">    margin: 10px 0 30px 0;</span><br><span class="line">  &#125;</span><br><span class="line">  .play-btn &#123;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    width: 135px;</span><br><span class="line">    padding: 7px 0;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    text-align: center;</span><br><span class="line">    border: 1px solid $color-text-l;</span><br><span class="line">    color: $color-text-l;</span><br><span class="line">    border-radius: 100px;</span><br><span class="line">    font-size: 0;</span><br><span class="line">    .icon-play &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">      margin-right: 6px;</span><br><span class="line">      font-size: $font-size-medium-x;</span><br><span class="line">    &#125;</span><br><span class="line">    .text &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">      font-size: $font-size-small;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .list-wrapper &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 110px;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    .list-scroll &#123;</span><br><span class="line">      height: 100%;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      .list-inner &#123;</span><br><span class="line">        padding: 20px 30px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/20/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/20/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">vue3项目实战-路由配置和全局入口文件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-20 09:35:28 / 修改时间：09:41:33" itemprop="dateCreated datePublished" datetime="2021-10-20T09:35:28+08:00">2021-10-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">项目实战</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>src/main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/scss/index.scss&#x27;</span> <span class="comment">// 引入全局样式,需要sass-loader10.1.0以上, node-sass5.0.0以上</span></span><br><span class="line"><span class="keyword">import</span> lazyPlugin <span class="keyword">from</span> <span class="string">&#x27;vue3-lazy&#x27;</span> <span class="comment">// 图片懒加载</span></span><br><span class="line"><span class="keyword">import</span> loadingDirective <span class="keyword">from</span> <span class="string">&#x27;./components/base/loading/directive&#x27;</span> <span class="comment">// 自定义指令</span></span><br><span class="line"><span class="keyword">import</span> noResultDirective <span class="keyword">from</span> <span class="string">&#x27;@/components/base/no-result/directive&#x27;</span> <span class="comment">// 自定义指令</span></span><br><span class="line"><span class="keyword">import</span> &#123; processSongs &#125; <span class="keyword">from</span> <span class="string">&#x27;./service/song&#x27;</span> <span class="comment">// 更新我喜欢和最近播放歌曲的url</span></span><br><span class="line"><span class="keyword">import</span> &#123; saveAll, load &#125; <span class="keyword">from</span> <span class="string">&#x27;./assets/js/array-store&#x27;</span> <span class="comment">// 存储所有歌曲并缓存</span></span><br><span class="line"><span class="keyword">import</span> &#123; FAVORITE_KEY, PLAYED_KEY &#125; <span class="keyword">from</span> <span class="string">&#x27;./assets/js/constant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面载入时就对localStorage里的数据更新</span></span><br><span class="line"><span class="keyword">const</span> favoriteSongs = load(FAVORITE_KEY)</span><br><span class="line"><span class="keyword">if</span> (favoriteSongs.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  processSongs(favoriteSongs).then(<span class="function">(<span class="params">songs</span>) =&gt;</span> &#123;</span><br><span class="line">    store.commit(<span class="string">&#x27;setFavoriteList&#x27;</span>, songs)</span><br><span class="line">    saveAll(songs, FAVORITE_KEY)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面载入时就对localStorage里的数据更新</span></span><br><span class="line"><span class="keyword">const</span> historySongs = load(PLAYED_KEY)</span><br><span class="line"><span class="keyword">if</span> (historySongs.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  processSongs(historySongs).then(<span class="function">(<span class="params">songs</span>) =&gt;</span> &#123;</span><br><span class="line">    store.commit(<span class="string">&#x27;setPlayHistory&#x27;</span>, songs)</span><br><span class="line">    saveAll(songs, PLAYED_KEY)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.use(store)</span><br><span class="line">   .use(router)</span><br><span class="line">   .directive(<span class="string">&#x27;loading&#x27;</span>, loadingDirective)</span><br><span class="line">   .directive(<span class="string">&#x27;no-result&#x27;</span>, noResultDirective)</span><br><span class="line">   .use(lazyPlugin, &#123; <span class="attr">loading</span>: <span class="built_in">require</span>(<span class="string">&#x27;@/assets/loading/loading.gif&#x27;</span>) &#125;)</span><br><span class="line">   .mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>





<h3 id="src-router-index-js"><a href="#src-router-index-js" class="headerlink" title="src/router/index.js"></a>src/router/index.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">// 异步加载(按需加载)——加webpackChunkName是加载时请求的自定义名称，不然可能是数字</span></span><br><span class="line"><span class="keyword">const</span> Recommend = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/recommend/recommend&#x27;</span><span class="comment">/* webpackChunkName: &quot;recommend&quot; */</span>)</span><br><span class="line"><span class="keyword">const</span> Singer = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/singer/singer&#x27;</span><span class="comment">/* webpackChunkName: &quot;singer&quot; */</span>)</span><br><span class="line"><span class="keyword">const</span> TopList = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/top-list/top-list&#x27;</span><span class="comment">/* webpackChunkName: &quot;top-list&quot; */</span>)</span><br><span class="line"><span class="keyword">const</span> SingerDetail = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/singer/child/singer-detail&#x27;</span><span class="comment">/* webpackChunkName: &quot;singer-detail&quot; */</span>)</span><br><span class="line"><span class="keyword">const</span> AlbumDetail = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/recommend/components/album-detail&#x27;</span><span class="comment">/* webpackChunkName: &quot;album-detail&quot; */</span>)</span><br><span class="line"><span class="keyword">const</span> TopDetail = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/top-list/top-detail&#x27;</span><span class="comment">/* webpackChunkName: &quot;top-detail&quot; */</span>)</span><br><span class="line"><span class="keyword">const</span> UserCenter = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/user-center/user-center&#x27;</span><span class="comment">/* webpackChunkName: &quot;user-center&quot; */</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/recommend&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/recommend&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: Recommend,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: AlbumDetail</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/singer&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: Singer,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: SingerDetail</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/top-list&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: TopList,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: TopDetail</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">      <span class="attr">user</span>: UserCenter</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  <span class="attr">history</span>: createWebHashHistory(process.env.BASE_URL),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>



<p>src/App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;m-header/&gt;</span><br><span class="line">  &lt;tab&gt;&lt;/tab&gt;</span><br><span class="line">  &lt;router-view v-slot=&quot;&#123; Component &#125;&quot; :style=&quot;fixedScroll&quot;&gt;</span><br><span class="line">    &lt;keep-alive&gt;</span><br><span class="line">      &lt;component :is=&quot;Component&quot;/&gt;</span><br><span class="line">    &lt;/keep-alive&gt;</span><br><span class="line">  &lt;/router-view&gt;</span><br><span class="line">  &lt;router-view v-slot=&quot;&#123; Component &#125;&quot;</span><br><span class="line">               :style=&quot;fixedScroll&quot;</span><br><span class="line">               name=&quot;user&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;transition appear name=&quot;slide&quot;&gt;</span><br><span class="line">      &lt;keep-alive&gt;</span><br><span class="line">        &lt;component :is=&quot;Component&quot;/&gt;</span><br><span class="line">      &lt;/keep-alive&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/router-view&gt;</span><br><span class="line">  &lt;player&gt;&lt;/player&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Header from &#x27;@/components/header/header&#x27; // 头部</span><br><span class="line">  import Tab from &#x27;@/components/tab/tab&#x27; // 导航栏</span><br><span class="line">  import Player from &#x27;./components/player/player&#x27; // 音乐播放器</span><br><span class="line">  import &#123; mapState &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">      MHeader: Header,</span><br><span class="line">      Tab,</span><br><span class="line">      Player</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      fixedScroll() &#123;</span><br><span class="line">        const bottom = this.playlist.length ? &#x27;60px&#x27; : &#x27;0&#x27;</span><br><span class="line">        return &#123;</span><br><span class="line">          bottom</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      ...mapState([&#x27;playlist&#x27;])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/20/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E8%AF%A6%E6%83%85%E9%A1%B5%E9%80%BB%E8%BE%91%E5%B0%81%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/20/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E8%AF%A6%E6%83%85%E9%A1%B5%E9%80%BB%E8%BE%91%E5%B0%81%E8%A3%85/" class="post-title-link" itemprop="url">vue3项目实战-详情页及封装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-20 09:20:59 / 修改时间：09:31:23" itemprop="dateCreated datePublished" datetime="2021-10-20T09:20:59+08:00">2021-10-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">项目实战</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="详情页逻辑封装"><a href="#详情页逻辑封装" class="headerlink" title="详情页逻辑封装"></a>详情页逻辑封装</h3><p>详情页会用到song-list,而推荐里的歌单推荐，歌手，排行榜单三个tab都会用到详情页，所以我们对详情页的逻辑进行封装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; processSongs &#125; <span class="keyword">from</span> <span class="string">&#x27;@/service/song&#x27;</span></span><br><span class="line"><span class="keyword">import</span> DetailList <span class="keyword">from</span> <span class="string">&#x27;@/components/detail-list/detail-list&#x27;</span></span><br><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&#x27;good-storage&#x27;</span> <span class="comment">// 可存储对象的storage</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 三个参数，组件名, storage的key，请求函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">name, key, fetch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name,</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">      DetailList</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">data</span>: <span class="built_in">Object</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">songs</span>: [],</span><br><span class="line">        <span class="attr">loading</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">      <span class="comment">// 获取到来自singer点击时sessionStorage的数据</span></span><br><span class="line">      <span class="function"><span class="title">computedData</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> ret</span><br><span class="line">        <span class="keyword">const</span> data = <span class="built_in">this</span>.data</span><br><span class="line">        <span class="keyword">if</span> (data) &#123;</span><br><span class="line">          ret = data</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> cached = storage.session.get(key)</span><br><span class="line">          <span class="comment">// sessionStorage里有数据，而且mid和路由参数的id相等,返回data里的数据</span></span><br><span class="line">          <span class="keyword">if</span> (cached &amp;&amp; (cached.mid || cached.id + <span class="string">&#x27;&#x27;</span>) === <span class="built_in">this</span>.$route.params.id) &#123;</span><br><span class="line">            ret = cached</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 获取歌手图片</span></span><br><span class="line">      <span class="function"><span class="title">pic</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> computedData = <span class="built_in">this</span>.computedData</span><br><span class="line">        <span class="keyword">return</span> computedData &amp;&amp; computedData.pic</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 获取歌手名字作为标题</span></span><br><span class="line">      <span class="function"><span class="title">title</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> computedData = <span class="built_in">this</span>.computedData</span><br><span class="line">        <span class="keyword">return</span> computedData &amp;&amp; (computedData.name || computedData.title)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> created () &#123;</span><br><span class="line">      <span class="keyword">const</span> computedData = <span class="built_in">this</span>.computedData</span><br><span class="line">      <span class="comment">// 歌手详情页url发生改变而且没有对应的数据,返回上一级</span></span><br><span class="line">      <span class="keyword">if</span> (!computedData) &#123;</span><br><span class="line">        <span class="keyword">const</span> path = <span class="built_in">this</span>.$route.matched[<span class="number">0</span>].path</span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">          path</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// detail中的内容和songs是重叠的,</span></span><br><span class="line">      <span class="comment">// 先获取detail在获取songs是因为后端需要detail的mid来获取歌曲的url，</span></span><br><span class="line">      <span class="comment">// 而mid可能每天都在变化,算是一个防盗</span></span><br><span class="line">      <span class="keyword">const</span> detail = <span class="keyword">await</span> fetch(computedData)</span><br><span class="line">      <span class="built_in">this</span>.songs = <span class="keyword">await</span> processSongs(detail.songs)</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="detail-list-vue"><a href="#detail-list-vue" class="headerlink" title="detail-list.vue"></a>detail-list.vue</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail-list&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">       <span class="attr">v-loading</span>=<span class="string">&quot;loading&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">  &gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--    返回图标    --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">class</span>=<span class="string">&quot;back&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      @<span class="attr">click</span>=<span class="string">&quot;goBack&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    &gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;icon-back&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--   歌手名    --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--    图片    --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">class</span>=<span class="string">&quot;bg-image&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">:style</span>=<span class="string">&quot;bgImageStyle&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">ref</span>=<span class="string">&quot;bgImage&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">v-if</span>=<span class="string">&quot;!loading&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    &gt;</span></span></span><br><span class="line"><span class="xml">  <span class="comment">&lt;!--    随机播放    --&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">class</span>=<span class="string">&quot;play-btn-wrapper&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      &gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          <span class="attr">v-show</span>=<span class="string">&quot;songs.length &gt; 0&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          <span class="attr">class</span>=<span class="string">&quot;play-btn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          @<span class="attr">click</span>=<span class="string">&quot;random&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        &gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;icon-play&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>随机播放全部<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="comment">&lt;!--    图片滤镜    --&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">class</span>=<span class="string">&quot;filter&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--    歌曲列表    --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">scroll</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">:style</span>=<span class="string">&quot;scrollStyle&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">:probeType</span>=<span class="string">&quot;3&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            @<span class="attr">scroll</span>=<span class="string">&quot;onScroll&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    &gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;song-list-wrapper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">song-list</span> <span class="attr">:songs</span>=<span class="string">&quot;songs&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                   @<span class="attr">select</span>=<span class="string">&quot;selectedSong&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                   <span class="attr">:rank</span>=<span class="string">&quot;rank&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        &gt;</span><span class="tag">&lt;/<span class="name">song-list</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">scroll</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">import</span> SongList <span class="keyword">from</span> <span class="string">&#x27;@/components/base/song-list/song-list&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">import</span> Scroll <span class="keyword">from</span> <span class="string">&#x27;@/components/wrap-scroll&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">import</span> &#123; mapActions, mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">name</span>: <span class="string">&#x27;music-list&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      SongList,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      Scroll</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="comment">// 歌曲数据</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">songs</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">type</span>: <span class="built_in">Array</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">default</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="keyword">return</span> []</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">title</span>: <span class="built_in">String</span>, <span class="comment">// 歌手名</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">pic</span>: <span class="built_in">String</span>, <span class="comment">// 图片</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">loading</span>: <span class="built_in">Boolean</span>, <span class="comment">// 加载效果</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">rank</span>: <span class="built_in">Boolean</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">scrollY</span>: <span class="number">0</span> <span class="comment">// 滚动位置Y</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">goBack</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.$router.back() <span class="comment">// 返回上层级</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">onScroll</span>(<span class="params">pos</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.scrollY = -pos.y <span class="comment">// 拿到歌曲list滚动位置Y</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">selectedSong</span>(<span class="params">&#123; song, index &#125;</span>)</span> &#123; <span class="comment">// 收集到歌曲列表和索引派发给actions</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.selectPlay(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="attr">list</span>: <span class="built_in">this</span>.songs,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          index</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">random</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.randomPlay(<span class="built_in">this</span>.songs)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      ...mapActions([ <span class="comment">// 派发actions</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="string">&#x27;selectPlay&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="string">&#x27;randomPlay&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      ])</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">bgImageStyle</span>(<span class="params"></span>)</span> &#123; <span class="comment">// 背景图片样式</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">const</span> scrollY = <span class="built_in">this</span>.scrollY <span class="comment">// 滚动位置</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">let</span> scale = <span class="number">1</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">if</span> (scrollY &lt; <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          scale = <span class="number">1</span> + <span class="built_in">Math</span>.abs(scrollY / <span class="built_in">this</span>.imageHeight) <span class="comment">// 列表下拖图片放大效果</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="attr">backgroundImage</span>: <span class="string">`url(<span class="subst">$&#123;<span class="built_in">this</span>.pic&#125;</span>)`</span>, <span class="comment">// 图片展示</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="attr">transform</span>: <span class="string">`scale(<span class="subst">$&#123;scale&#125;</span>)`</span> <span class="comment">// 列表下拖图片放大效果</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">imageHeight</span>(<span class="params"></span>)</span> &#123; <span class="comment">// 图片高度</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> <span class="built_in">this</span>.$refs.bgImage.offsetHeight</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">scrollStyle</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">const</span> bottom = <span class="built_in">this</span>.playlist.length ? <span class="string">&#x27;60px&#x27;</span> : <span class="string">&#x27;0&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          bottom</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      ...mapState([<span class="string">&#x27;playlist&#x27;</span>])</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.detail-list</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.back</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">left</span>: <span class="number">3px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">z-index</span>: <span class="number">20</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">2px</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="selector-class">.icon-back</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">display</span>: block;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">font-size</span>: $font-size-large-x;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">color</span>: $color-theme;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.title</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">left</span>: <span class="number">10%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">width</span>: <span class="number">80%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">z-index</span>: <span class="number">20</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">2px</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="keyword">@include</span> no-wrap();</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">line-height</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">font-size</span>: $font-size-large;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">color</span>: $color-theme;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.bg-image</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">height</span>: $image-height;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">transform-origin</span>: top;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">background-size</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">background-repeat</span>: no-repeat;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">border-left</span>: <span class="number">1px</span> solid <span class="number">#ffcd32</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#ffcd32</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">border-bottom</span>: <span class="number">5px</span> solid <span class="number">#ffcd32</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">30px</span> <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="selector-class">.play-btn-wrapper</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">bottom</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">z-index</span>: <span class="number">10</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.play-btn</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">box-sizing</span>: border-box;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">width</span>: <span class="number">135px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">padding</span>: <span class="number">7px</span> <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">border</span>: <span class="number">1px</span> solid $color-theme;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">color</span>: $color-theme;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">font-size</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.icon-play</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">display</span>: inline-block;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">vertical-align</span>: middle;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">margin-right</span>: <span class="number">6px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">font-size</span>: $font-size-medium-x;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.text</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">display</span>: inline-block;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">vertical-align</span>: middle;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">font-size</span>: $font-size-small;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="selector-class">.filter</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">10px</span> <span class="number">2px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.4</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.list</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">top</span>: $image-height - <span class="number">5px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">z-index</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="selector-class">.song-list-wrapper</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">background</span>: $color-background;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="song-list组件"><a href="#song-list组件" class="headerlink" title="song-list组件"></a>song-list组件</h3><p><strong>song-list组件在用户中心也会用到</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;song-list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">li</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">class</span>=<span class="string">&quot;item&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">v-for</span>=<span class="string">&quot;(song,index) in songs&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">:key</span>=<span class="string">&quot;song.id&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      @<span class="attr">click</span>=<span class="string">&quot;selectItem(song,index)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    &gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;rank&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;rank&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">:class</span>=<span class="string">&quot;getRankCls(index)&quot;</span>&gt;</span>&#123;&#123; getRankText(index) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123;song.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>&#123;&#123;getDesc(song)&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">name</span>: <span class="string">&#x27;song-list&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">songs</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">type</span>: <span class="built_in">Array</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">default</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="keyword">return</span> []</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">rank</span>: <span class="built_in">Boolean</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">emits</span>: [<span class="string">&#x27;select&#x27;</span>],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">getDesc</span>(<span class="params">song</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;song.singer&#125;</span>·<span class="subst">$&#123;song.album&#125;</span>`</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">selectItem</span>(<span class="params">song, index</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.$emit(<span class="string">&#x27;select&#x27;</span>, &#123; song, index &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">getRankCls</span>(<span class="params">index</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">if</span> (index &lt;= <span class="number">2</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="keyword">return</span> <span class="string">`icon icon<span class="subst">$&#123;index&#125;</span>`</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="keyword">return</span> <span class="string">&#x27;text&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">getRankText</span>(<span class="params">index</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">if</span> (index &gt; <span class="number">2</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="keyword">return</span> index++</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.song-list</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.item</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">box-sizing</span>: border-box;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">height</span>: <span class="number">64px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">font-size</span>: $font-size-medium;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="selector-class">.rank</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">width</span>: <span class="number">25px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.icon</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">display</span>: inline-block;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">width</span>: <span class="number">25px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">height</span>: <span class="number">24px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">background-size</span>: <span class="number">25px</span> <span class="number">24px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          &amp;<span class="selector-class">.icon0</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">            <span class="keyword">@include</span> bg-image(<span class="string">&#x27;first&#x27;</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">          &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">          &amp;<span class="selector-class">.icon1</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">            <span class="keyword">@include</span> bg-image(<span class="string">&#x27;second&#x27;</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">          &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">          &amp;<span class="selector-class">.icon2</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">            <span class="keyword">@include</span> bg-image(<span class="string">&#x27;third&#x27;</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">          &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.text</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">color</span>: $color-theme;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">font-size</span>: $font-size-large;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="selector-class">.content</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">flex</span>: <span class="number">1</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">line-height</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.name</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="keyword">@include</span> no-wrap();</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">color</span>: $color-text</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.desc</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="keyword">@include</span> no-wrap();</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">margin-top</span>: <span class="number">4px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">color</span>: $color-text-d;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><h4 id="album-detail-vue"><a href="#album-detail-vue" class="headerlink" title="album-detail.vue"></a>album-detail.vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;singer-detail&quot;&gt;</span><br><span class="line">    &lt;detail-list :title=&quot;title&quot;</span><br><span class="line">                 :pic=&quot;pic&quot;</span><br><span class="line">                 :songs=&quot;songs&quot;</span><br><span class="line">                 :loading=&quot;loading&quot;</span><br><span class="line">    &gt;&lt;/detail-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getAlbum &#125; from &#x27;@/service/recommend&#x27;</span><br><span class="line">import &#123; ALBUM_KEY &#125; from &#x27;@/assets/js/constant&#x27; // sessionStorage存储singer对象</span><br><span class="line">import createDetailComponent from &#x27;@/assets/js/create-detail-component&#x27; // 逻辑封装</span><br><span class="line"></span><br><span class="line">export default createDetailComponent(&#x27;album-detail&#x27;, ALBUM_KEY, getAlbum)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">// 覆盖歌手页面</span><br><span class="line">.singer-detail &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  z-index: 10;</span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  background: $color-background;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h4 id="singer-detail"><a href="#singer-detail" class="headerlink" title="singer-detail"></a>singer-detail</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;singer-detail&quot;&gt;</span><br><span class="line">    &lt;detail-list :title=&quot;title&quot;</span><br><span class="line">                :pic=&quot;pic&quot;</span><br><span class="line">                :songs=&quot;songs&quot;</span><br><span class="line">                :loading=&quot;loading&quot;</span><br><span class="line">    &gt;&lt;/detail-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getSingerDetail &#125; from &#x27;@/service/singer&#x27;</span><br><span class="line">import &#123; SINGER_KEY &#125; from &#x27;@/assets/js/constant&#x27; // sessionStorage存储singer对象</span><br><span class="line">import createDetailComponent from &#x27;@/assets/js/create-detail-component&#x27; // 逻辑封装</span><br><span class="line"></span><br><span class="line">export default createDetailComponent(&#x27;singer-detail&#x27;, SINGER_KEY, getSingerDetail)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">// 覆盖歌手页面</span><br><span class="line">.singer-detail &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  z-index: 10;</span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  background: $color-background;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h4 id="top-detail"><a href="#top-detail" class="headerlink" title="top-detail"></a>top-detail</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;singer-detail&quot;&gt;</span><br><span class="line">    &lt;detail-list :title=&quot;title&quot;</span><br><span class="line">                 :pic=&quot;pic&quot;</span><br><span class="line">                 :songs=&quot;songs&quot;</span><br><span class="line">                 :loading=&quot;loading&quot;</span><br><span class="line">                 rank</span><br><span class="line">    &gt;&lt;/detail-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; TOP_KEY &#125; from &#x27;../../assets/js/constant&#x27;</span><br><span class="line">import &#123; getTopDetail &#125; from &#x27;../../service/top-list&#x27;</span><br><span class="line">import createDetailComponent from &#x27;@/assets/js/create-detail-component&#x27; // 逻辑封装</span><br><span class="line"></span><br><span class="line">export default createDetailComponent(&#x27;top-detail&#x27;, TOP_KEY, getTopDetail)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">// 覆盖歌手页面</span><br><span class="line">.singer-detail &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  z-index: 10;</span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  background: $color-background;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/16/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E8%BF%B7%E4%BD%A0%E6%92%AD%E6%94%BE%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/16/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E8%BF%B7%E4%BD%A0%E6%92%AD%E6%94%BE%E5%99%A8/" class="post-title-link" itemprop="url">vue3项目实战-迷你播放器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-16 14:49:17 / 修改时间：15:44:51" itemprop="dateCreated datePublished" datetime="2021-10-16T14:49:17+08:00">2021-10-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">项目实战</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="主组件"><a href="#主组件" class="headerlink" title="主组件"></a>主组件</h2><p>src/components/player/mini-player.vue</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;mini&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">class</span>=<span class="string">&quot;mini-player&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">v-show</span>=<span class="string">&quot;!fullScreen&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      @<span class="attr">click</span>=<span class="string">&quot;showNormalPlayer&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    &gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--      CD展示--&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cd-wrapper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cd&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">             <span class="attr">ref</span>=<span class="string">&quot;cdRef&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        &gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">ref</span>=<span class="string">&quot;cdImageRef&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">               <span class="attr">width</span>=<span class="string">&quot;40&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">               <span class="attr">height</span>=<span class="string">&quot;40&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">               <span class="attr">:class</span>=<span class="string">&quot;cdCls&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">               <span class="attr">:src</span>=<span class="string">&quot;currentSong.pic&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          &gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--      歌曲切换--&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;sliderWrapperRef&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">           <span class="attr">class</span>=<span class="string">&quot;slider-wrapper&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      &gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slider-group&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">class</span>=<span class="string">&quot;slider-page&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">v-for</span>=<span class="string">&quot;song in playlist&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">:key</span>=<span class="string">&quot;song.id&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          &gt;</span></span></span><br><span class="line"><span class="xml">  <span class="comment">&lt;!--      歌曲名和歌手名--&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123;song.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>&#123;&#123;song.singer&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--      播放逻辑--&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="comment">&lt;!--      播放/暂停,进度显示--&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;control&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">progress-circle</span> <span class="attr">:radius</span>=<span class="string">&quot;32&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                         <span class="attr">:progress</span>=<span class="string">&quot;progress&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        &gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">i</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">class</span>=<span class="string">&quot;icon-mini&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">:class</span>=<span class="string">&quot;miniPlayIcon&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            @<span class="attr">click.stop</span>=<span class="string">&quot;togglePlay&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          &gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">progress-circle</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="comment">&lt;!--      播放列表--&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;control&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;icon-playlist&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="comment">// hooks导入</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> useCd <span class="keyword">from</span> <span class="string">&#x27;./use-cd&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> useMiniSlider <span class="keyword">from</span> <span class="string">&#x27;./use-mini-slider&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="comment">// 组件导入</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> progressCircle <span class="keyword">from</span> <span class="string">&#x27;./components/progress-circle&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>: <span class="string">&#x27;mini-player&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    progressCircle <span class="comment">// 进度效果</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">progress</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">default</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">togglePlay</span>: <span class="built_in">Function</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// data</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> store = useStore()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> fullScreen = computed(<span class="function">() =&gt;</span> store.state.fullScreen) <span class="comment">// 是否满屏</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> currentSong = computed(<span class="function">() =&gt;</span> store.getters.currentSong) <span class="comment">// 当前歌曲</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> playing = computed(<span class="function">() =&gt;</span> store.state.playing) <span class="comment">// 播放状态</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> playlist = computed(<span class="function">() =&gt;</span> store.state.playlist) <span class="comment">// 播放列表</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> miniPlayIcon = computed(<span class="function">() =&gt;</span> playing.value ? <span class="string">&#x27;icon-pause&#x27;</span> : <span class="string">&#x27;icon-play&#x27;</span>) <span class="comment">// 计算暂停和播放按钮的样式</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// hooks</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> &#123; cdRef, cdCls, cdImageRef &#125; = useCd() <span class="comment">// 复用player的轮子</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> &#123; slider, sliderWrapperRef &#125; = useMiniSlider() <span class="comment">// 迷你播放器逻辑</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// methods</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="keyword">function</span> <span class="title">showNormalPlayer</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      store.commit(<span class="string">&#x27;setFullScreen&#x27;</span>, <span class="literal">true</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 导出</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="comment">// computed</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      fullScreen,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      currentSong,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      playing,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      playlist,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      miniPlayIcon,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="comment">// methods</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      showNormalPlayer,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="comment">// cd-hooks</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      cdRef,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      cdCls,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      cdImageRef,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="comment">// slider-hooks</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      slider,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      sliderWrapperRef</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.mini-player</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">position</span>: fixed;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">z-index</span>: <span class="number">180</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">height</span>: <span class="number">60px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">background</span>: $color-highlight-background;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.cd-wrapper</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">height</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.cd</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="selector-tag">img</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &amp;<span class="selector-class">.playing</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">animation</span>: rotate <span class="number">10s</span> linear infinite;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &amp;<span class="selector-class">.pause</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">animation-play-state</span>: paused;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.slider-wrapper</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">flex-direction</span>: column;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">justify-content</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.slider-group</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">overflow</span>: hidden;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">white-space</span>: nowrap;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="selector-class">.slider-page</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">display</span>: inline-block;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">backface-visibility</span>: hidden;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.name</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">margin-bottom</span>: <span class="number">2px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="keyword">@include</span> no-wrap();</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">font-size</span>: $font-size-medium;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">color</span>: $color-text;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="selector-class">.desc</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="keyword">@include</span> no-wrap();</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">font-size</span>: $font-size-small;</span></span></span><br><span class="line"><span class="css"><span class="xml">          <span class="attribute">color</span>: $color-text-d;</span></span></span><br><span class="line"><span class="css"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.control</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">width</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.icon-playlist</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">top</span>: -<span class="number">2px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">font-size</span>: <span class="number">28px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">color</span>: $color-theme-d;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-class">.icon-mini</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">color</span>: $color-theme-d;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &amp;<span class="selector-class">.mini-enter-active</span>, &amp;<span class="selector-class">.mini-leave-active</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transition</span>: all <span class="number">0.6s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.45</span>, <span class="number">0</span>, <span class="number">0.55</span>, <span class="number">1</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &amp;<span class="selector-class">.mini-enter-from</span>, &amp;<span class="selector-class">.mini-leave-to</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">100%</span>, <span class="number">0</span>)</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="子组件"><a href="#子组件" class="headerlink" title="子组件"></a>子组件</h3><p>利用svg—circle来显示歌曲进度</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-circle&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">svg</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">:width</span>=<span class="string">&quot;radius&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">:height</span>=<span class="string">&quot;radius&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">viewBox</span>=<span class="string">&quot;0 0 100 100&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    &gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">circle</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">class</span>=<span class="string">&quot;progress-background&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">r</span>=<span class="string">&quot;50&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">cx</span>=<span class="string">&quot;50&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">cy</span>=<span class="string">&quot;50&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">fill</span>=<span class="string">&quot;transparent&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">circle</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">class</span>=<span class="string">&quot;progress-bar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">r</span>=<span class="string">&quot;50&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">cx</span>=<span class="string">&quot;50&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">cy</span>=<span class="string">&quot;50&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">fill</span>=<span class="string">&quot;transparent&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">:stroke-dasharray</span>=<span class="string">&quot;dashArray&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">:stroke-dashoffset</span>=<span class="string">&quot;dashOffset&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">name</span>: <span class="string">&#x27;progress-circle&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">radius</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">default</span>: <span class="number">100</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">progress</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">default</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">dashArray</span>: <span class="built_in">Math</span>.PI * <span class="number">100</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function"><span class="title">dashOffset</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> (<span class="number">1</span> - <span class="built_in">this</span>.progress) * <span class="built_in">this</span>.dashArray</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.progress-circle</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="css"><span class="xml">    circle &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      stroke-<span class="attribute">width</span>: <span class="number">8px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">transform-origin</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &amp;<span class="selector-class">.progress-background</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">        stroke: $color-theme-d;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &amp;<span class="selector-class">.progress-bar</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>) <span class="built_in">rotate</span>(-<span class="number">90deg</span>);</span></span></span><br><span class="line"><span class="css"><span class="xml">        stroke: $color-theme;</span></span></span><br><span class="line"><span class="css"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="逻辑1"><a href="#逻辑1" class="headerlink" title="逻辑1"></a>逻辑1</h3><p>CD旋转效果(use-cd)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed, ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useCd</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> store = useStore()</span><br><span class="line">  <span class="keyword">const</span> cdRef = ref(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">const</span> cdImageRef = ref(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">const</span> playing = computed(<span class="function">() =&gt;</span> store.state.playing)</span><br><span class="line">  <span class="keyword">const</span> cdCls = computed(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> playing.value ? <span class="string">&#x27;playing&#x27;</span> : <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  watch(playing, <span class="function">(<span class="params">newVal</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!newVal) &#123; <span class="comment">// 不旋转的时候改变角度</span></span><br><span class="line">      syncTransform(cdRef.value, cdImageRef.value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">syncTransform</span>(<span class="params">wrapper, inner</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> wrapperTransform = getComputedStyle(wrapper).transform <span class="comment">// 外层旋转角度</span></span><br><span class="line">    <span class="keyword">const</span> innerTransform = getComputedStyle(inner).transform <span class="comment">// 内层旋转角度</span></span><br><span class="line">    wrapper.style.transform = wrapperTransform === <span class="string">&#x27;none&#x27;</span> ? innerTransform</span><br><span class="line">      : innerTransform + wrapperTransform <span class="comment">// 计算出旋转角度</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    cdCls,</span><br><span class="line">    cdRef,</span><br><span class="line">    cdImageRef</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="逻辑2"><a href="#逻辑2" class="headerlink" title="逻辑2"></a>逻辑2</h3><p>左右滑动切换歌曲(use-mini-slider)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> BScroll <span class="keyword">from</span> <span class="string">&#x27;@better-scroll/core&#x27;</span></span><br><span class="line"><span class="keyword">import</span> slider <span class="keyword">from</span> <span class="string">&#x27;@better-scroll/slide&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed, nextTick, onActivated, onDeactivated, onMounted, onUnmounted, ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line">BScroll.use(slider)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// data</span></span><br><span class="line">  <span class="keyword">const</span> store = useStore()</span><br><span class="line">  <span class="keyword">const</span> sliderWrapperRef = ref(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// computed</span></span><br><span class="line">  <span class="keyword">const</span> fullScreen = computed(<span class="function">() =&gt;</span> store.state.fullScreen)</span><br><span class="line">  <span class="keyword">const</span> playlist = computed(<span class="function">() =&gt;</span> store.state.playlist)</span><br><span class="line">  <span class="keyword">const</span> currentIndex = computed(<span class="function">() =&gt;</span> store.state.currentIndex)</span><br><span class="line">  <span class="keyword">const</span> miniIsShow = computed(<span class="function">() =&gt;</span> &#123; <span class="comment">// 迷你歌曲是否已经展示</span></span><br><span class="line">    <span class="keyword">return</span> !fullScreen.value &amp;&amp; !!playlist.value</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 生命周期钩子</span></span><br><span class="line">  onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> sliderVal</span><br><span class="line">    watch(miniIsShow, <span class="keyword">async</span> (newShow) =&gt; &#123; <span class="comment">// 观察miniShow是否已经展示</span></span><br><span class="line">      <span class="keyword">if</span> (newShow) &#123;</span><br><span class="line">        <span class="keyword">await</span> nextTick()</span><br><span class="line">        <span class="keyword">if</span> (!sliderVal) &#123;</span><br><span class="line">          <span class="comment">// 获取BScroll实例</span></span><br><span class="line">          sliderVal = slider.value = <span class="keyword">new</span> BScroll(sliderWrapperRef.value, &#123;</span><br><span class="line">            <span class="attr">click</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">scrollX</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">scrollY</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">momentum</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">bounce</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">probeType</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">slide</span>: &#123;</span><br><span class="line">              <span class="attr">autoplay</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="attr">loop</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="comment">// 修改当前歌曲索引值,并设置播放状态为true</span></span><br><span class="line">          sliderVal.on(<span class="string">&#x27;slidePageChanged&#x27;</span>, <span class="function">(<span class="params">&#123; pageX &#125;</span>) =&gt;</span> &#123; <span class="comment">// slidePageChanged(BScroll的slider插件的方法,可以检测到当前轮播图的索引值)</span></span><br><span class="line">            store.commit(<span class="string">&#x27;setCurrentIndex&#x27;</span>, pageX)</span><br><span class="line">            store.commit(<span class="string">&#x27;setPlayingState&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// 重新计算 BetterScroll，当 DOM 结构发生变化的时候务必要调用确保滚动的效果正常。</span></span><br><span class="line">          sliderVal.refresh()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 滚动到对应索引</span></span><br><span class="line">        sliderVal.goToPage(currentIndex.value, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 歌曲索引值变化,轮播图到对应位置</span></span><br><span class="line">    watch(currentIndex, <span class="function">(<span class="params">newIndex</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (sliderVal &amp;&amp; miniIsShow.value) &#123;</span><br><span class="line">        sliderVal.goToPage(newIndex, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 歌曲列表变化轮播图重新计算</span></span><br><span class="line">    watch(playlist, <span class="keyword">async</span> (newList) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (sliderVal &amp;&amp; miniIsShow.value &amp;&amp; newList.length) &#123;</span><br><span class="line">        <span class="keyword">await</span> nextTick()</span><br><span class="line">        sliderVal.refresh()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUnmounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (slider.value) &#123;</span><br><span class="line">      slider.value.destroy()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  onActivated(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    slider.value.enable()</span><br><span class="line">    slider.value.refresh()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  onDeactivated(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    slider.value.disable()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    slider,</span><br><span class="line">    sliderWrapperRef</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/11/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E6%92%AD%E6%94%BE%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/11/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E6%92%AD%E6%94%BE%E5%99%A8/" class="post-title-link" itemprop="url">vue3项目实战-播放器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-11 19:48:05" itemprop="dateCreated datePublished" datetime="2021-10-11T19:48:05+08:00">2021-10-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-20 09:16:16" itemprop="dateModified" datetime="2021-10-20T09:16:16+08:00">2021-10-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">项目实战</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="播放器主逻辑"><a href="#播放器主逻辑" class="headerlink" title="播放器主逻辑"></a>播放器主逻辑</h2><p>src/components/player/player.vue</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/10/11/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E6%92%AD%E6%94%BE%E5%99%A8/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/11/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-vuex%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/11/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-vuex%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">vue3项目实战-播放器的vuex配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-11 19:47:42" itemprop="dateCreated datePublished" datetime="2021-10-11T19:47:42+08:00">2021-10-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-20 09:34:50" itemprop="dateModified" datetime="2021-10-20T09:34:50+08:00">2021-10-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="src-store-index-js"><a href="#src-store-index-js" class="headerlink" title="src/store/index.js"></a>src/store/index.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, createLogger &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; state &#125; <span class="keyword">from</span> <span class="string">&#x27;./state&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; mutations &#125; <span class="keyword">from</span> <span class="string">&#x27;./mutations&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> getters <span class="keyword">from</span> <span class="string">&#x27;./getters&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> debug = process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(&#123;</span><br><span class="line">  state,</span><br><span class="line">  getters,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">  <span class="attr">strict</span>: debug,</span><br><span class="line">  <span class="attr">plugins</span>: debug ? [createLogger()] : [] <span class="comment">// 用来在log页面查看mutation和action状态变化</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/10/11/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-vuex%E9%85%8D%E7%BD%AE/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/10/TypeScipt-%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/10/TypeScipt-%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">TypeScipt-入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-10 16:48:04" itemprop="dateCreated datePublished" datetime="2021-10-10T16:48:04+08:00">2021-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-11 19:54:43" itemprop="dateModified" datetime="2021-10-11T19:54:43+08:00">2021-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TypeScript/" itemprop="url" rel="index"><span itemprop="name">TypeScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>TypeScript 是添加了类型系统的 JavaScript，适用于任何规模的项目。</li>
<li>TypeScript 是一门静态类型、弱类型的语言。</li>
<li>TypeScript 是完全兼容 JavaScript 的，它不会修改 JavaScript 运行时的特性。</li>
<li>TypeScript 可以编译为 JavaScript，然后运行在浏览器、Node.js 等任何能运行 JavaScript 的环境中。</li>
<li>TypeScript 拥有很多编译选项，类型检查的严格程度由你决定。</li>
<li>TypeScript 可以和 JavaScript 共存，这意味着 JavaScript 项目能够渐进式的迁移到 TypeScript。</li>
<li>TypeScript 增强了编辑器（IDE）的功能，提供了代码补全、接口提示、跳转到定义、代码重构等能力。</li>
<li>TypeScript 拥有活跃的社区，大多数常用的第三方库都提供了类型声明。</li>
<li>TypeScript 与标准同步发展，符合最新的 ECMAScript 标准（stage 3）。</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/10/10/TypeScipt-%E5%85%A5%E9%97%A8/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/09/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E6%AD%8C%E6%89%8B%E8%AF%A6%E6%83%85%E9%A1%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/09/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E6%AD%8C%E6%89%8B%E8%AF%A6%E6%83%85%E9%A1%B5/" class="post-title-link" itemprop="url">vue3项目实战-歌手详情页</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-09 16:40:29" itemprop="dateCreated datePublished" datetime="2021-10-09T16:40:29+08:00">2021-10-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-10 11:33:36" itemprop="dateModified" datetime="2021-10-10T11:33:36+08:00">2021-10-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">项目实战</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="歌手详情页"><a href="#歌手详情页" class="headerlink" title="歌手详情页"></a>歌手详情页</h2>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/10/09/vue3%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E6%AD%8C%E6%89%8B%E8%AF%A6%E6%83%85%E9%A1%B5/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/10/08/41-%E5%9B%9E%E6%BA%AF%E5%9B%BA%E5%AE%9A%E5%A5%97%E8%B7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/08/41-%E5%9B%9E%E6%BA%AF%E5%9B%BA%E5%AE%9A%E5%A5%97%E8%B7%AF/" class="post-title-link" itemprop="url">41-回溯固定套路</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-08 21:30:17" itemprop="dateCreated datePublished" datetime="2021-10-08T21:30:17+08:00">2021-10-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-11 19:54:55" itemprop="dateModified" datetime="2021-10-11T19:54:55+08:00">2021-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="固定套路"><a href="#固定套路" class="headerlink" title="固定套路"></a>固定套路</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">result = []</span><br><span class="line">def backtrack(路径, 选择列表):</span><br><span class="line">    <span class="keyword">if</span> 满足结束条件:</span><br><span class="line">        result.add(路径)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> 选择 <span class="keyword">in</span> 选择列表:</span><br><span class="line">        做选择</span><br><span class="line">        backtrack(路径, 选择列表)</span><br><span class="line">        撤销选择</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/10/08/41-%E5%9B%9E%E6%BA%AF%E5%9B%BA%E5%AE%9A%E5%A5%97%E8%B7%AF/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Eden Yi"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Eden Yi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Yummy-zZ" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Yummy-zZ" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yjh2412750872@gmail.com" title="E-Mail → mailto:yjh2412750872@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eden Yi</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div><script color="66,197,172" opacity="0.85" zIndex="-1" count="88" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>


  















  

  

</body>
</html>
