<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/%E6%9F%A0%E6%AA%AC%E5%B9%B2.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/%E8%8D%89%E8%8E%93.svg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/%E8%8D%89%E8%8E%93.svg">
  <link rel="mask-icon" href="/images/%E6%9F%A0%E6%AA%AC%E5%B9%B2.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yummy-zz.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Yum">
<meta property="og:url" content="https://yummy-zz.github.io/page/2/index.html">
<meta property="og:site_name" content="Yum">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Eden Yi">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://yummy-zz.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Yum</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <a target="_blank" rel="noopener" href="https://github.com/Yummy-zZ" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yum</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/20/22-css2d%E5%92%8C3d%E8%BD%AC%E6%8D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/20/22-css2d%E5%92%8C3d%E8%BD%AC%E6%8D%A2/" class="post-title-link" itemprop="url">22-css2då’Œ3dè½¬æ¢</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-20 18:22:23 / ä¿®æ”¹æ—¶é—´ï¼š18:35:07" itemprop="dateCreated datePublished" datetime="2021-09-20T18:22:23+08:00">2021-09-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSS/" itemprop="url" rel="index"><span itemprop="name">CSS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="CSSâ€”â€”2d"><a href="#CSSâ€”â€”2d" class="headerlink" title="CSSâ€”â€”2d"></a>CSSâ€”â€”2d</h2><p>â€‹
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/20/22-css2d%E5%92%8C3d%E8%BD%AC%E6%8D%A2/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/19/21-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/19/21-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/" class="post-title-link" itemprop="url">21-æµè§ˆå™¨ç¼“å­˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-19 17:50:46 / ä¿®æ”¹æ—¶é—´ï¼š17:51:30" itemprop="dateCreated datePublished" datetime="2021-09-19T17:50:46+08:00">2021-09-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/" itemprop="url" rel="index"><span itemprop="name">æµè§ˆå™¨</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="httpçš„ç¼“å­˜æœºåˆ¶-é‡è¦"><a href="#httpçš„ç¼“å­˜æœºåˆ¶-é‡è¦" class="headerlink" title="httpçš„ç¼“å­˜æœºåˆ¶(é‡è¦)"></a>httpçš„ç¼“å­˜æœºåˆ¶(é‡è¦)</h3><p><img src="https://raw.githubusercontent.com/Yummy-zZ/FigureBed/main/img/640.png" alt="img"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/19/21-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/18/20-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/18/20-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">20-å“åº”å¼åŸç†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-18 17:19:07" itemprop="dateCreated datePublished" datetime="2021-09-18T17:19:07+08:00">2021-09-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-24 09:33:45" itemprop="dateModified" datetime="2021-09-24T09:33:45+08:00">2021-09-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue/" itemprop="url" rel="index"><span itemprop="name">Vue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vue2å“åº”å¼åŸç†"><a href="#Vue2å“åº”å¼åŸç†" class="headerlink" title="Vue2å“åº”å¼åŸç†"></a>Vue2å“åº”å¼åŸç†</h1><h2 id="ğŸ†Object-defineProperty"><a href="#ğŸ†Object-defineProperty" class="headerlink" title="ğŸ†Object.defineProperty"></a>ğŸ†Object.defineProperty</h2><p>ç‚¹è¿ç®—(obj.a = 1)å’Œåœ¨å¯¹è±¡é‡Œç›´æ¥åˆ›å»ºå±æ€§ä»£è¡¨äº†å…¶ä»–æè¿°ç¬¦éƒ½ä¸ºtrueï¼Œä¾‹å¦‚writable: true,configurable: true,enumerable: true, value: 1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(obj, prop, descriptor)</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ«å‚æ•°"><a href="#ğŸ«å‚æ•°" class="headerlink" title="ğŸ«å‚æ•°"></a>ğŸ«å‚æ•°</h3><ul>
<li><p><code>obj</code></p>
<p>è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚</p>
</li>
<li><p><code>prop</code></p>
<p>è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°æˆ– <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol"><code>Symbol</code></a> ã€‚</p>
</li>
<li><p><code>descriptor</code></p>
<p>è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦ã€‚</p>
<h3 id="ğŸŒ°ä¾‹å­"><a href="#ğŸŒ°ä¾‹å­" class="headerlink" title="ğŸŒ°ä¾‹å­"></a>ğŸŒ°ä¾‹å­</h3></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object1 = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(object1, <span class="string">&#x27;property1&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">42</span>,</span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">object1.property1 = <span class="number">77</span>;</span><br><span class="line"><span class="comment">// throws an error in strict mode</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(object1.property1);</span><br><span class="line"><span class="comment">// expected output: 42</span></span><br></pre></td></tr></table></figure>

<h3 id=""><a href="#" class="headerlink" title=""></a>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/18/20-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/18/19-diff%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/18/19-diff%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">19-diffç®—æ³•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-18 16:14:23" itemprop="dateCreated datePublished" datetime="2021-09-18T16:14:23+08:00">2021-09-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-20 08:02:54" itemprop="dateModified" datetime="2021-09-20T08:02:54+08:00">2021-09-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue/" itemprop="url" rel="index"><span itemprop="name">Vue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ğŸŒ¹è™šæ‹ŸDOM"><a href="#ğŸŒ¹è™šæ‹ŸDOM" class="headerlink" title="ğŸŒ¹è™šæ‹ŸDOM"></a>ğŸŒ¹è™šæ‹ŸDOM</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>å‘µå‘µ<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>å˜¿å˜¿<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¹åº”çš„è™šæ‹ŸDOM</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dom = &#123;</span><br><span class="line">  <span class="attr">tagName</span>: <span class="string">&#x27;ul&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;list&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123;<span class="attr">tagName</span>: <span class="string">&#x27;li&#x27;</span>, <span class="attr">props</span>: &#123;<span class="attr">class</span>: <span class="string">&#x27;item&#x27;</span>&#125;, <span class="attr">children</span>: [<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>]&#125;,</span><br><span class="line">    &#123;<span class="attr">tagName</span>: <span class="string">&#x27;li&#x27;</span>, <span class="attr">props</span>: &#123;<span class="attr">class</span>: <span class="string">&#x27;item&#x27;</span>&#125;, <span class="attr">children</span>: [<span class="string">&#x27;å‘µå‘µ&#x27;</span>]&#125;,</span><br><span class="line">    &#123;<span class="attr">tagName</span>: <span class="string">&#x27;li&#x27;</span>, <span class="attr">props</span>: &#123;<span class="attr">class</span>: <span class="string">&#x27;item&#x27;</span>&#125;, <span class="attr">children</span>: [<span class="string">&#x27;å˜¿å˜¿&#x27;</span>]&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/18/19-diff%E7%AE%97%E6%B3%95/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/17/18-Vue%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/17/18-Vue%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB/" class="post-title-link" itemprop="url">18-Vueè·¯ç”±å®ˆå«</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-17 17:46:48" itemprop="dateCreated datePublished" datetime="2021-09-17T17:46:48+08:00">2021-09-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-24 10:17:43" itemprop="dateModified" datetime="2021-09-24T10:17:43+08:00">2021-09-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/VueRouter/" itemprop="url" rel="index"><span itemprop="name">VueRouter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ğŸŒˆè·¯ç”±å®ˆå«è°ƒç”¨é¡ºåº"><a href="#ğŸŒˆè·¯ç”±å®ˆå«è°ƒç”¨é¡ºåº" class="headerlink" title="ğŸŒˆè·¯ç”±å®ˆå«è°ƒç”¨é¡ºåº"></a>ğŸŒˆè·¯ç”±å®ˆå«è°ƒç”¨é¡ºåº</h2><ol>
<li>å¯¼èˆªè¢«è§¦å‘ã€‚</li>
<li>åœ¨<strong>å¤±æ´»çš„ç»„ä»¶</strong>é‡Œè°ƒç”¨ <code>beforeRouteLeave</code> å®ˆå«ã€‚</li>
<li>è°ƒç”¨ <strong>å…¨å±€</strong> çš„ <code>beforeEach</code> å®ˆå«ã€‚</li>
<li>åœ¨<strong>é‡ç”¨çš„ç»„ä»¶</strong>é‡Œè°ƒç”¨ <code>beforeRouteUpdate</code> å®ˆå«(2.2+)ã€‚</li>
<li>åœ¨<strong>è·¯ç”±é…ç½®é‡Œ</strong>è°ƒç”¨ <code>beforeEnter</code>ã€‚</li>
<li>è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚</li>
<li>åœ¨è¢«æ¿€æ´»çš„<strong>ç»„ä»¶é‡Œ</strong>è°ƒç”¨ <code>beforeRouteEnter</code>ã€‚</li>
<li>è°ƒç”¨<strong>å…¨å±€</strong>çš„ <code>beforeResolve</code> å®ˆå«(2.5+)ã€‚</li>
<li>å¯¼èˆªè¢«ç¡®è®¤ã€‚</li>
<li>è°ƒç”¨<strong>å…¨å±€</strong>çš„ <code>afterEach</code> é’©å­ã€‚</li>
<li>è§¦å‘ DOM æ›´æ–°ã€‚</li>
<li>è°ƒç”¨ <code>beforeRouteEnter</code> å®ˆå«ä¸­ä¼ ç»™ <code>next</code> çš„å›è°ƒå‡½æ•°ï¼Œåˆ›å»ºå¥½çš„ç»„ä»¶å®ä¾‹ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/17/17-axios/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/17/17-axios/" class="post-title-link" itemprop="url">17-axios</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-17 09:35:06 / ä¿®æ”¹æ—¶é—´ï¼š10:21:40" itemprop="dateCreated datePublished" datetime="2021-09-17T09:35:06+08:00">2021-09-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" itemprop="url" rel="index"><span itemprop="name">ç½‘ç»œè¯·æ±‚</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul>
<li>ä»æµè§ˆå™¨ä¸­åˆ›å»º <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequests</a></li>
<li>ä» node.js åˆ›å»º <a target="_blank" rel="noopener" href="http://nodejs.org/api/http.html">http</a> è¯·æ±‚</li>
<li>æ”¯æŒ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> API</li>
<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>
<li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®</li>
<li>å–æ¶ˆè¯·æ±‚</li>
<li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®</li>
<li>å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">XSRF</a></li>
</ul>
<h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2><p>æ‰§è¡Œ <code>GET</code> è¯·æ±‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// ä¸ºç»™å®š ID çš„ user åˆ›å»ºè¯·æ±‚</span><br><span class="line">axios.get(&#x27;/user?ID=12345&#x27;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">// ä¸Šé¢çš„è¯·æ±‚ä¹Ÿå¯ä»¥è¿™æ ·åš</span><br><span class="line">axios.get(&#x27;/user&#x27;, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: 12345</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ <code>POST</code> è¯·æ±‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&#x27;/user&#x27;, &#123;</span><br><span class="line">    firstName: &#x27;Fred&#x27;,</span><br><span class="line">    lastName: &#x27;Flintstone&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get(&#x27;/user/12345&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get(&#x27;/user/12345/permissions&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct, perms) &#123;</span><br><span class="line">    // ä¸¤ä¸ªè¯·æ±‚ç°åœ¨éƒ½æ‰§è¡Œå®Œæˆ</span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure>



<h2 id="è¯·æ±‚é…ç½®"><a href="#è¯·æ±‚é…ç½®" class="headerlink" title="è¯·æ±‚é…ç½®"></a>è¯·æ±‚é…ç½®</h2><p>è¿™äº›æ˜¯åˆ›å»ºè¯·æ±‚æ—¶å¯ä»¥ç”¨çš„é…ç½®é€‰é¡¹ã€‚åªæœ‰ <code>url</code> æ˜¯å¿…éœ€çš„ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š <code>method</code>ï¼Œè¯·æ±‚å°†é»˜è®¤ä½¿ç”¨ <code>get</code> æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = axios.create(</span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// `url` æ˜¯ç”¨äºè¯·æ±‚çš„æœåŠ¡å™¨ URL</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `method` æ˜¯åˆ›å»ºè¯·æ±‚æ—¶ä½¿ç”¨çš„æ–¹æ³•</span></span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `baseURL` å°†è‡ªåŠ¨åŠ åœ¨ `url` å‰é¢ï¼Œé™¤é `url` æ˜¯ä¸€ä¸ªç»å¯¹ URLã€‚</span></span><br><span class="line">  <span class="comment">// å®ƒå¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ª `baseURL` ä¾¿äºä¸º axios å®ä¾‹çš„æ–¹æ³•ä¼ é€’ç›¸å¯¹ URL</span></span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://some-domain.com/api/&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `transformRequest` å…è®¸åœ¨å‘æœåŠ¡å™¨å‘é€å‰ï¼Œä¿®æ”¹è¯·æ±‚æ•°æ®</span></span><br><span class="line">  <span class="comment">// åªèƒ½ç”¨åœ¨ &#x27;PUT&#x27;, &#x27;POST&#x27; å’Œ &#x27;PATCH&#x27; è¿™å‡ ä¸ªè¯·æ±‚æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// åé¢æ•°ç»„ä¸­çš„å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ– ArrayBufferï¼Œæˆ– Stream</span></span><br><span class="line">  <span class="attr">transformRequest</span>: [<span class="function"><span class="keyword">function</span> (<span class="params">data, headers</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¯¹ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `transformResponse` åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œå…è®¸ä¿®æ”¹å“åº”æ•°æ®</span></span><br><span class="line">  <span class="attr">transformResponse</span>: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¯¹ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `headers` æ˜¯å³å°†è¢«å‘é€çš„è‡ªå®šä¹‰è¯·æ±‚å¤´</span></span><br><span class="line">  <span class="attr">headers</span>: &#123;<span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `params` æ˜¯å³å°†ä¸è¯·æ±‚ä¸€èµ·å‘é€çš„ URL å‚æ•°</span></span><br><span class="line">  <span class="comment">// å¿…é¡»æ˜¯ä¸€ä¸ªæ— æ ¼å¼å¯¹è±¡(plain object)æˆ– URLSearchParams å¯¹è±¡</span></span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">ID</span>: <span class="number">12345</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `paramsSerializer` æ˜¯ä¸€ä¸ªè´Ÿè´£ `params` åºåˆ—åŒ–çš„å‡½æ•°</span></span><br><span class="line">  <span class="comment">// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span></span><br><span class="line">  <span class="attr">paramsSerializer</span>: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Qs.stringify(params, &#123;<span class="attr">arrayFormat</span>: <span class="string">&#x27;brackets&#x27;</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `data` æ˜¯ä½œä¸ºè¯·æ±‚ä¸»ä½“è¢«å‘é€çš„æ•°æ®</span></span><br><span class="line">  <span class="comment">// åªé€‚ç”¨äºè¿™äº›è¯·æ±‚æ–¹æ³• &#x27;PUT&#x27;, &#x27;POST&#x27;, å’Œ &#x27;PATCH&#x27;</span></span><br><span class="line">  <span class="comment">// åœ¨æ²¡æœ‰è®¾ç½® `transformRequest` æ—¶ï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š</span></span><br><span class="line">  <span class="comment">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span></span><br><span class="line">  <span class="comment">// - æµè§ˆå™¨ä¸“å±ï¼šFormData, File, Blob</span></span><br><span class="line">  <span class="comment">// - Node ä¸“å±ï¼š Stream</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `timeout` æŒ‡å®šè¯·æ±‚è¶…æ—¶çš„æ¯«ç§’æ•°(0 è¡¨ç¤ºæ— è¶…æ—¶æ—¶é—´)</span></span><br><span class="line">  <span class="comment">// å¦‚æœè¯·æ±‚è¯è´¹äº†è¶…è¿‡ `timeout` çš„æ—¶é—´ï¼Œè¯·æ±‚å°†è¢«ä¸­æ–­</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">1000</span>,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `withCredentials` è¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯</span></span><br><span class="line">  <span class="attr">withCredentials</span>: <span class="literal">false</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `adapter` å…è®¸è‡ªå®šä¹‰å¤„ç†è¯·æ±‚ï¼Œä»¥ä½¿æµ‹è¯•æ›´è½»æ¾</span></span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ª promise å¹¶åº”ç”¨ä¸€ä¸ªæœ‰æ•ˆçš„å“åº” (æŸ¥é˜… [response docs](#response-api)).</span></span><br><span class="line">  <span class="attr">adapter</span>: <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"> <span class="comment">// `auth` è¡¨ç¤ºåº”è¯¥ä½¿ç”¨ HTTP åŸºç¡€éªŒè¯ï¼Œå¹¶æä¾›å‡­æ®</span></span><br><span class="line">  <span class="comment">// è¿™å°†è®¾ç½®ä¸€ä¸ª `Authorization` å¤´ï¼Œè¦†å†™æ‰ç°æœ‰çš„ä»»æ„ä½¿ç”¨ `headers` è®¾ç½®çš„è‡ªå®šä¹‰ `Authorization`å¤´</span></span><br><span class="line">  <span class="attr">auth</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;janedoe&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;s00pers3cret&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `responseType` è¡¨ç¤ºæœåŠ¡å™¨å“åº”çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ˜¯ &#x27;arraybuffer&#x27;, &#x27;blob&#x27;, &#x27;document&#x27;, &#x27;json&#x27;, &#x27;text&#x27;, &#x27;stream&#x27;</span></span><br><span class="line">  <span class="attr">responseType</span>: <span class="string">&#x27;json&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `responseEncoding` indicates encoding to use for decoding responses</span></span><br><span class="line">  <span class="comment">// Note: Ignored for `responseType` of &#x27;stream&#x27; or client-side requests</span></span><br><span class="line">  <span class="attr">responseEncoding</span>: <span class="string">&#x27;utf8&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// `xsrfCookieName` æ˜¯ç”¨ä½œ xsrf token çš„å€¼çš„cookieçš„åç§°</span></span><br><span class="line">  <span class="attr">xsrfCookieName</span>: <span class="string">&#x27;XSRF-TOKEN&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `xsrfHeaderName` is the name of the http header that carries the xsrf token value</span></span><br><span class="line">  <span class="attr">xsrfHeaderName</span>: <span class="string">&#x27;X-XSRF-TOKEN&#x27;</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// `onUploadProgress` å…è®¸ä¸ºä¸Šä¼ å¤„ç†è¿›åº¦äº‹ä»¶</span></span><br><span class="line">  <span class="attr">onUploadProgress</span>: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Do whatever you want with the native progress event</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `onDownloadProgress` å…è®¸ä¸ºä¸‹è½½å¤„ç†è¿›åº¦äº‹ä»¶</span></span><br><span class="line">  <span class="attr">onDownloadProgress</span>: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¯¹åŸç”Ÿè¿›åº¦äº‹ä»¶çš„å¤„ç†</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `maxContentLength` å®šä¹‰å…è®¸çš„å“åº”å†…å®¹çš„æœ€å¤§å°ºå¯¸</span></span><br><span class="line">  <span class="attr">maxContentLength</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `validateStatus` å®šä¹‰å¯¹äºç»™å®šçš„HTTP å“åº”çŠ¶æ€ç æ˜¯ resolve æˆ– reject  promise ã€‚å¦‚æœ `validateStatus` è¿”å› `true` (æˆ–è€…è®¾ç½®ä¸º `null` æˆ– `undefined`)ï¼Œpromise å°†è¢« resolve; å¦åˆ™ï¼Œpromise å°†è¢« rejecte</span></span><br><span class="line">  <span class="attr">validateStatus</span>: <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>; <span class="comment">// default</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `maxRedirects` å®šä¹‰åœ¨ node.js ä¸­ follow çš„æœ€å¤§é‡å®šå‘æ•°ç›®</span></span><br><span class="line">  <span class="comment">// å¦‚æœè®¾ç½®ä¸º0ï¼Œå°†ä¸ä¼š follow ä»»ä½•é‡å®šå‘</span></span><br><span class="line">  <span class="attr">maxRedirects</span>: <span class="number">5</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `socketPath` defines a UNIX Socket to be used in node.js.</span></span><br><span class="line">  <span class="comment">// e.g. &#x27;/var/run/docker.sock&#x27; to send requests to the docker daemon.</span></span><br><span class="line">  <span class="comment">// Only either `socketPath` or `proxy` can be specified.</span></span><br><span class="line">  <span class="comment">// If both are specified, `socketPath` is used.</span></span><br><span class="line">  <span class="attr">socketPath</span>: <span class="literal">null</span>, <span class="comment">// default</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `httpAgent` å’Œ `httpsAgent` åˆ†åˆ«åœ¨ node.js ä¸­ç”¨äºå®šä¹‰åœ¨æ‰§è¡Œ http å’Œ https æ—¶ä½¿ç”¨çš„è‡ªå®šä¹‰ä»£ç†ã€‚å…è®¸åƒè¿™æ ·é…ç½®é€‰é¡¹ï¼š</span></span><br><span class="line">  <span class="comment">// `keepAlive` é»˜è®¤æ²¡æœ‰å¯ç”¨</span></span><br><span class="line">  <span class="attr">httpAgent</span>: <span class="keyword">new</span> http.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">  <span class="attr">httpsAgent</span>: <span class="keyword">new</span> https.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x27;proxy&#x27; å®šä¹‰ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºåç§°å’Œç«¯å£</span></span><br><span class="line">  <span class="comment">// `auth` è¡¨ç¤º HTTP åŸºç¡€éªŒè¯åº”å½“ç”¨äºè¿æ¥ä»£ç†ï¼Œå¹¶æä¾›å‡­æ®</span></span><br><span class="line">  <span class="comment">// è¿™å°†ä¼šè®¾ç½®ä¸€ä¸ª `Proxy-Authorization` å¤´ï¼Œè¦†å†™æ‰å·²æœ‰çš„é€šè¿‡ä½¿ç”¨ `header` è®¾ç½®çš„è‡ªå®šä¹‰ `Proxy-Authorization` å¤´ã€‚</span></span><br><span class="line">  <span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">9000</span>,</span><br><span class="line">    <span class="attr">auth</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;mikeymike&#x27;</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;rapunz3l&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `cancelToken` æŒ‡å®šç”¨äºå–æ¶ˆè¯·æ±‚çš„ cancel token</span></span><br><span class="line">  <span class="comment">// ï¼ˆæŸ¥çœ‹åé¢çš„ Cancellation è¿™èŠ‚äº†è§£æ›´å¤šï¼‰</span></span><br><span class="line">  <span class="attr">cancelToken</span>: <span class="keyword">new</span> CancelToken(<span class="function"><span class="keyword">function</span> (<span class="params">cancel</span>) </span>&#123;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="å“åº”ç»“æ„"><a href="#å“åº”ç»“æ„" class="headerlink" title="å“åº”ç»“æ„"></a>å“åº”ç»“æ„</h2><p>æŸä¸ªè¯·æ±‚çš„å“åº”åŒ…å«ä»¥ä¸‹ä¿¡æ¯</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// `data` ç”±æœåŠ¡å™¨æä¾›çš„å“åº”</span></span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `status` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ç </span></span><br><span class="line">  <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `statusText` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">statusText</span>: <span class="string">&#x27;OK&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `headers` æœåŠ¡å™¨å“åº”çš„å¤´</span></span><br><span class="line">  <span class="attr">headers</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// `config` æ˜¯ä¸ºè¯·æ±‚æä¾›çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">config</span>: &#123;&#125;,</span><br><span class="line"> <span class="comment">// &#x27;request&#x27;</span></span><br><span class="line">  <span class="comment">// `request` is the request that generated this response</span></span><br><span class="line">  <span class="comment">// It is the last ClientRequest instance in node.js (in redirects)</span></span><br><span class="line">  <span class="comment">// and an XMLHttpRequest instance the browser</span></span><br><span class="line">  <span class="attr">request</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>then</code> æ—¶ï¼Œä½ å°†æ¥æ”¶ä¸‹é¢è¿™æ ·çš„å“åº” :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/user/12345&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response.data);</span><br><span class="line">    <span class="built_in">console</span>.log(response.status);</span><br><span class="line">    <span class="built_in">console</span>.log(response.statusText);</span><br><span class="line">    <span class="built_in">console</span>.log(response.headers);</span><br><span class="line">    <span class="built_in">console</span>.log(response.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>



<h2 id="é…ç½®é»˜è®¤å€¼"><a href="#é…ç½®é»˜è®¤å€¼" class="headerlink" title="é…ç½®é»˜è®¤å€¼"></a>é…ç½®é»˜è®¤å€¼</h2><p>ä½ å¯ä»¥æŒ‡å®šå°†è¢«ç”¨åœ¨å„ä¸ªè¯·æ±‚çš„é…ç½®é»˜è®¤å€¼</p>
<h3 id="å…¨å±€çš„-axios-é»˜è®¤å€¼"><a href="#å…¨å±€çš„-axios-é»˜è®¤å€¼" class="headerlink" title="å…¨å±€çš„ axios é»˜è®¤å€¼"></a>å…¨å±€çš„ axios é»˜è®¤å€¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = &#x27;https://api.example.com&#x27;;</span><br><span class="line">axios.defaults.headers.common[&#x27;Authorization&#x27;] = AUTH_TOKEN;</span><br><span class="line">axios.defaults.headers.post[&#x27;Content-Type&#x27;] = &#x27;application/x-www-form-urlencoded&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼"><a href="#è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼" class="headerlink" title="è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼"></a>è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Set config defaults when creating the instance</span><br><span class="line">const instance = axios.create(&#123;</span><br><span class="line">  baseURL: &#x27;https://api.example.com&#x27;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// Alter defaults after instance has been created</span><br><span class="line">instance.defaults.headers.common[&#x27;Authorization&#x27;] = AUTH_TOKEN;</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®çš„ä¼˜å…ˆé¡ºåº"><a href="#é…ç½®çš„ä¼˜å…ˆé¡ºåº" class="headerlink" title="é…ç½®çš„ä¼˜å…ˆé¡ºåº"></a>é…ç½®çš„ä¼˜å…ˆé¡ºåº</h3><p>é…ç½®ä¼šä»¥ä¸€ä¸ªä¼˜å…ˆé¡ºåºè¿›è¡Œåˆå¹¶ã€‚è¿™ä¸ªé¡ºåºæ˜¯ï¼šåœ¨ <code>lib/defaults.js</code> æ‰¾åˆ°çš„åº“çš„é»˜è®¤å€¼ï¼Œç„¶åæ˜¯å®ä¾‹çš„ <code>defaults</code> å±æ€§ï¼Œæœ€åæ˜¯è¯·æ±‚çš„ <code>config</code> å‚æ•°ã€‚åè€…å°†ä¼˜å…ˆäºå‰è€…ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// ä½¿ç”¨ç”±åº“æä¾›çš„é…ç½®çš„é»˜è®¤å€¼æ¥åˆ›å»ºå®ä¾‹</span><br><span class="line">// æ­¤æ—¶è¶…æ—¶é…ç½®çš„é»˜è®¤å€¼æ˜¯ `0`</span><br><span class="line">var instance = axios.create();</span><br><span class="line"></span><br><span class="line">// è¦†å†™åº“çš„è¶…æ—¶é»˜è®¤å€¼</span><br><span class="line">// ç°åœ¨ï¼Œåœ¨è¶…æ—¶å‰ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šç­‰å¾… 2.5 ç§’</span><br><span class="line">instance.defaults.timeout = 2500;</span><br><span class="line"></span><br><span class="line">// ä¸ºå·²çŸ¥éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´çš„è¯·æ±‚è¦†å†™è¶…æ—¶è®¾ç½®</span><br><span class="line">instance.get(&#x27;/longRequest&#x27;, &#123;</span><br><span class="line">  timeout: 5000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h2><p>åœ¨è¯·æ±‚æˆ–å“åº”è¢« <code>then</code> æˆ– <code>catch</code> å¤„ç†å‰æ‹¦æˆªå®ƒä»¬ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span><br><span class="line">axios.interceptors.request.use(function (config) &#123;</span><br><span class="line">    // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ</span><br><span class="line">    return config;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span><br><span class="line">axios.interceptors.response.use(function (response) &#123;</span><br><span class="line">    // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ</span><br><span class="line">    return response;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æƒ³åœ¨ç¨åç§»é™¤æ‹¦æˆªå™¨ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const myInterceptor = axios.interceptors.request.use(function () &#123;/*...*/&#125;);</span><br><span class="line">axios.interceptors.request.eject(myInterceptor);</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä¸ºè‡ªå®šä¹‰ axios å®ä¾‹æ·»åŠ æ‹¦æˆªå™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const instance = axios.create();</span><br><span class="line">instance.interceptors.request.use(function () &#123;/*...*/&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;/user/12345&#x27;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    if (error.response) &#123;</span><br><span class="line">      // The request was made and the server responded with a status code</span><br><span class="line">      // that falls out of the range of 2xx</span><br><span class="line">      console.log(error.response.data);</span><br><span class="line">      console.log(error.response.status);</span><br><span class="line">      console.log(error.response.headers);</span><br><span class="line">    &#125; else if (error.request) &#123;</span><br><span class="line">      // The request was made but no response was received</span><br><span class="line">      // `error.request` is an instance of XMLHttpRequest in the browser and an instance of</span><br><span class="line">      // http.ClientRequest in node.js</span><br><span class="line">      console.log(error.request);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // Something happened in setting up the request that triggered an Error</span><br><span class="line">      console.log(&#x27;Error&#x27;, error.message);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(error.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>Yå¯ä»¥ä½¿ç”¨ <code>validateStatus</code> é…ç½®é€‰é¡¹å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ HTTP çŠ¶æ€ç çš„é”™è¯¯èŒƒå›´ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;/user/12345&#x27;, &#123;</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &lt; 500; // Reject only if the status code is greater than or equal to 500</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="å–æ¶ˆ"><a href="#å–æ¶ˆ" class="headerlink" title="å–æ¶ˆ"></a>å–æ¶ˆ</h2><p>ä½¿ç”¨ <em>cancel token</em> å–æ¶ˆè¯·æ±‚</p>
<blockquote>
<p>Axios çš„ cancel token API åŸºäº<a target="_blank" rel="noopener" href="https://github.com/tc39/proposal-cancelable-promises">cancelable promises proposal</a>ï¼Œå®ƒè¿˜å¤„äºç¬¬ä¸€é˜¶æ®µã€‚</p>
</blockquote>
<p>å¯ä»¥ä½¿ç”¨ <code>CancelToken.source</code> å·¥å‚æ–¹æ³•åˆ›å»º cancel tokenï¼Œåƒè¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const CancelToken = axios.CancelToken;</span><br><span class="line">const source = CancelToken.source();</span><br><span class="line"></span><br><span class="line">axios.get(&#x27;/user/12345&#x27;, &#123;</span><br><span class="line">  cancelToken: source.token</span><br><span class="line">&#125;).catch(function(thrown) &#123;</span><br><span class="line">  if (axios.isCancel(thrown)) &#123;</span><br><span class="line">    console.log(&#x27;Request canceled&#x27;, thrown.message);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">     // å¤„ç†é”™è¯¯</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">axios.post(&#x27;/user/12345&#x27;, &#123;</span><br><span class="line">  name: &#x27;new name&#x27;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  cancelToken: source.token</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// å–æ¶ˆè¯·æ±‚ï¼ˆmessage å‚æ•°æ˜¯å¯é€‰çš„ï¼‰</span><br><span class="line">source.cancel(&#x27;Operation canceled by the user.&#x27;);</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ª executor å‡½æ•°åˆ° <code>CancelToken</code> çš„æ„é€ å‡½æ•°æ¥åˆ›å»º cancel tokenï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const CancelToken = axios.CancelToken;</span><br><span class="line">let cancel;</span><br><span class="line"></span><br><span class="line">axios.get(&#x27;/user/12345&#x27;, &#123;</span><br><span class="line">  cancelToken: new CancelToken(function executor(c) &#123;</span><br><span class="line">    // executor å‡½æ•°æ¥æ”¶ä¸€ä¸ª cancel å‡½æ•°ä½œä¸ºå‚æ•°</span><br><span class="line">    cancel = c;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// cancel the request</span><br><span class="line">cancel();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„: å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ª cancel token å–æ¶ˆå¤šä¸ªè¯·æ±‚</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/16/16-fetch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/16/16-fetch/" class="post-title-link" itemprop="url">16-fetchå’Œajax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-16 14:27:46 / ä¿®æ”¹æ—¶é—´ï¼š15:43:23" itemprop="dateCreated datePublished" datetime="2021-09-16T14:27:46+08:00">2021-09-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/" itemprop="url" rel="index"><span itemprop="name">ç½‘ç»œé€šä¿¡</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Fetch-API-æ•™ç¨‹"><a href="#Fetch-API-æ•™ç¨‹" class="headerlink" title="Fetch API æ•™ç¨‹"></a>Fetch API æ•™ç¨‹</h1><p>ä½œè€…ï¼š <a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/">é˜®ä¸€å³°</a></p>
<p>æ—¥æœŸï¼š <a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2020/12/">2020å¹´12æœˆ28æ—¥</a></p>
<p><code>fetch()</code>æ˜¯ XMLHttpRequest çš„å‡çº§ç‰ˆï¼Œç”¨äºåœ¨ JavaScript è„šæœ¬é‡Œé¢å‘å‡º HTTP è¯·æ±‚ã€‚</p>
<p>æµè§ˆå™¨åŸç”Ÿæä¾›è¿™ä¸ªå¯¹è±¡ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»å®ƒçš„ç”¨æ³•ã€‚</p>
<p><img src="https://www.wangbase.com/blogimg/asset/202012/bg2020122613.jpg" alt="img"></p>
<h2 id="ä¸€ã€åŸºæœ¬ç”¨æ³•"><a href="#ä¸€ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="ä¸€ã€åŸºæœ¬ç”¨æ³•"></a>ä¸€ã€åŸºæœ¬ç”¨æ³•</h2><p><code>fetch()</code>çš„åŠŸèƒ½ä¸ XMLHttpRequest åŸºæœ¬ç›¸åŒï¼Œä½†æœ‰ä¸‰ä¸ªä¸»è¦çš„å·®å¼‚ã€‚</p>
<p>ï¼ˆ1ï¼‰<code>fetch()</code>ä½¿ç”¨ Promiseï¼Œä¸ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œå› æ­¤å¤§å¤§ç®€åŒ–äº†å†™æ³•ï¼Œå†™èµ·æ¥æ›´ç®€æ´ã€‚</p>
<p>ï¼ˆ2ï¼‰<code>fetch()</code>é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼ŒAPI åˆ†æ•£åœ¨å¤šä¸ªå¯¹è±¡ä¸Šï¼ˆResponse å¯¹è±¡ã€Request å¯¹è±¡ã€Headers å¯¹è±¡ï¼‰ï¼Œæ›´åˆç†ä¸€äº›ï¼›ç›¸æ¯”ä¹‹ä¸‹ï¼ŒXMLHttpRequest çš„ API è®¾è®¡å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œè¾“å…¥ã€è¾“å‡ºã€çŠ¶æ€éƒ½åœ¨åŒä¸€ä¸ªæ¥å£ç®¡ç†ï¼Œå®¹æ˜“å†™å‡ºéå¸¸æ··ä¹±çš„ä»£ç ã€‚</p>
<p>ï¼ˆ3ï¼‰<code>fetch()</code>é€šè¿‡æ•°æ®æµï¼ˆStream å¯¹è±¡ï¼‰å¤„ç†æ•°æ®ï¼Œå¯ä»¥åˆ†å—è¯»å–ï¼Œæœ‰åˆ©äºæé«˜ç½‘ç«™æ€§èƒ½è¡¨ç°ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œå¯¹äºè¯·æ±‚å¤§æ–‡ä»¶æˆ–è€…ç½‘é€Ÿæ…¢çš„åœºæ™¯ç›¸å½“æœ‰ç”¨ã€‚XMLHTTPRequest å¯¹è±¡ä¸æ”¯æŒæ•°æ®æµï¼Œæ‰€æœ‰çš„æ•°æ®å¿…é¡»æ”¾åœ¨ç¼“å­˜é‡Œï¼Œä¸æ”¯æŒåˆ†å—è¯»å–ï¼Œå¿…é¡»ç­‰å¾…å…¨éƒ¨æ‹¿åˆ°åï¼Œå†ä¸€æ¬¡æ€§åå‡ºæ¥ã€‚</p>
<p>åœ¨ç”¨æ³•ä¸Šï¼Œ<code>fetch()</code>æ¥å—ä¸€ä¸ª URL å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œé»˜è®¤å‘è¯¥ç½‘å€å‘å‡º GET è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚å®ƒçš„åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(url)</span><br><span class="line">  .then(...)</span><br><span class="line">  .catch(...)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä»æœåŠ¡å™¨è·å– JSON æ•°æ®ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;https://api.github.com/users/ruanyf&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">  .then(<span class="function"><span class="params">json</span> =&gt;</span> <span class="built_in">console</span>.log(json))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;Request Failed&#x27;</span>, err)); </span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>fetch()</code>æ¥æ”¶åˆ°çš„<code>response</code>æ˜¯ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Streams_API">Stream å¯¹è±¡</a>ï¼Œ<code>response.json()</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå–å‡ºæ‰€æœ‰å†…å®¹ï¼Œå¹¶å°†å…¶è½¬ä¸º JSON å¯¹è±¡ã€‚</p>
<p>Promise å¯ä»¥ä½¿ç”¨ await è¯­æ³•æ”¹å†™ï¼Œä½¿å¾—è¯­ä¹‰æ›´æ¸…æ™°ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getJSON</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">&#x27;https://api.github.com/users/ruanyf&#x27;</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Request Failed&#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>await</code>è¯­å¥å¿…é¡»æ”¾åœ¨<code>try...catch</code>é‡Œé¢ï¼Œè¿™æ ·æ‰èƒ½æ•æ‰å¼‚æ­¥æ“ä½œä¸­å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚</p>
<p>åæ–‡éƒ½é‡‡ç”¨<code>await</code>çš„å†™æ³•ï¼Œä¸ä½¿ç”¨<code>.then()</code>çš„å†™æ³•ã€‚</p>
<h2 id="äºŒã€Response-å¯¹è±¡ï¼šå¤„ç†-HTTP-å›åº”"><a href="#äºŒã€Response-å¯¹è±¡ï¼šå¤„ç†-HTTP-å›åº”" class="headerlink" title="äºŒã€Response å¯¹è±¡ï¼šå¤„ç† HTTP å›åº”"></a>äºŒã€Response å¯¹è±¡ï¼šå¤„ç† HTTP å›åº”</h2><h3 id="2-1-Response-å¯¹è±¡çš„åŒæ­¥å±æ€§"><a href="#2-1-Response-å¯¹è±¡çš„åŒæ­¥å±æ€§" class="headerlink" title="2.1 Response å¯¹è±¡çš„åŒæ­¥å±æ€§"></a>2.1 Response å¯¹è±¡çš„åŒæ­¥å±æ€§</h3><p><code>fetch()</code>è¯·æ±‚æˆåŠŸä»¥åï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Response å¯¹è±¡</a>ã€‚å®ƒå¯¹åº”æœåŠ¡å™¨çš„ HTTP å›åº”ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url);</span><br></pre></td></tr></table></figure>
</blockquote>
<p>å‰é¢è¯´è¿‡ï¼ŒResponse åŒ…å«çš„æ•°æ®é€šè¿‡ Stream æ¥å£å¼‚æ­¥è¯»å–ï¼Œä½†æ˜¯å®ƒè¿˜åŒ…å«ä¸€äº›åŒæ­¥å±æ€§ï¼Œå¯¹åº” HTTP å›åº”çš„æ ‡å¤´ä¿¡æ¯ï¼ˆHeadersï¼‰ï¼Œå¯ä»¥ç«‹å³è¯»å–ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchText</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/readme.txt&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(response.status); </span><br><span class="line">  <span class="built_in">console</span>.log(response.statusText);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>response.status</code>å’Œ<code>response.statusText</code>å°±æ˜¯ Response çš„åŒæ­¥å±æ€§ï¼Œå¯ä»¥ç«‹å³è¯»å–ã€‚</p>
<p>æ ‡å¤´ä¿¡æ¯å±æ€§æœ‰ä¸‹é¢è¿™äº›ã€‚</p>
<p><strong>Response.ok</strong></p>
<p><code>Response.ok</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œ<code>true</code>å¯¹åº” HTTP è¯·æ±‚çš„çŠ¶æ€ç  200 åˆ° 299ï¼Œ<code>false</code>å¯¹åº”å…¶ä»–çš„çŠ¶æ€ç ã€‚</p>
<p><strong>Response.status</strong></p>
<p><code>Response.status</code>å±æ€§è¿”å›ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤º HTTP å›åº”çš„çŠ¶æ€ç ï¼ˆä¾‹å¦‚200ï¼Œè¡¨ç¤ºæˆåŠŸè¯·æ±‚ï¼‰ã€‚</p>
<p><strong>Response.statusText</strong></p>
<p><code>Response.statusText</code>å±æ€§è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º HTTP å›åº”çš„çŠ¶æ€ä¿¡æ¯ï¼ˆä¾‹å¦‚è¯·æ±‚æˆåŠŸä»¥åï¼ŒæœåŠ¡å™¨è¿”å›â€OKâ€ï¼‰ã€‚</p>
<p><strong>Response.url</strong></p>
<p><code>Response.url</code>å±æ€§è¿”å›è¯·æ±‚çš„ URLã€‚å¦‚æœ URL å­˜åœ¨è·³è½¬ï¼Œè¯¥å±æ€§è¿”å›çš„æ˜¯æœ€ç»ˆ URLã€‚</p>
<p><strong>Response.type</strong></p>
<p><code>Response.type</code>å±æ€§è¿”å›è¯·æ±‚çš„ç±»å‹ã€‚å¯èƒ½çš„å€¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li><code>basic</code>ï¼šæ™®é€šè¯·æ±‚ï¼Œå³åŒæºè¯·æ±‚ã€‚</li>
<li><code>cors</code>ï¼šè·¨åŸŸè¯·æ±‚ã€‚</li>
<li><code>error</code>ï¼šç½‘ç»œé”™è¯¯ï¼Œä¸»è¦ç”¨äº Service Workerã€‚</li>
<li><code>opaque</code>ï¼šå¦‚æœ<code>fetch()</code>è¯·æ±‚çš„<code>type</code>å±æ€§è®¾ä¸º<code>no-cors</code>ï¼Œå°±ä¼šè¿”å›è¿™ä¸ªå€¼ï¼Œè¯¦è§è¯·æ±‚éƒ¨åˆ†ã€‚è¡¨ç¤ºå‘å‡ºçš„æ˜¯ç®€å•çš„è·¨åŸŸè¯·æ±‚ï¼Œç±»ä¼¼<code>&lt;form&gt;</code>è¡¨å•çš„é‚£ç§è·¨åŸŸè¯·æ±‚ã€‚</li>
<li><code>opaqueredirect</code>ï¼šå¦‚æœ<code>fetch()</code>è¯·æ±‚çš„<code>redirect</code>å±æ€§è®¾ä¸º<code>manual</code>ï¼Œå°±ä¼šè¿”å›è¿™ä¸ªå€¼ï¼Œè¯¦è§è¯·æ±‚éƒ¨åˆ†ã€‚</li>
</ul>
</blockquote>
<p><strong>Response.redirected</strong></p>
<p><code>Response.redirected</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯·æ±‚æ˜¯å¦å‘ç”Ÿè¿‡è·³è½¬ã€‚</p>
<h3 id="2-2-åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸ"><a href="#2-2-åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸ" class="headerlink" title="2.2 åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸ"></a>2.2 åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸ</h3><p><code>fetch()</code>å‘å‡ºè¯·æ±‚ä»¥åï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ³¨æ„ç‚¹ï¼šåªæœ‰ç½‘ç»œé”™è¯¯ï¼Œæˆ–è€…æ— æ³•è¿æ¥æ—¶ï¼Œ<code>fetch()</code>æ‰ä¼šæŠ¥é”™ï¼Œå…¶ä»–æƒ…å†µéƒ½ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è®¤ä¸ºè¯·æ±‚æˆåŠŸã€‚</p>
<p>è¿™å°±æ˜¯è¯´ï¼Œå³ä½¿æœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ç æ˜¯ 4xx æˆ– 5xxï¼Œ<code>fetch()</code>ä¹Ÿä¸ä¼šæŠ¥é”™ï¼ˆå³ Promise ä¸ä¼šå˜ä¸º <code>rejected</code>çŠ¶æ€ï¼‰ã€‚</p>
<p>åªæœ‰é€šè¿‡<code>Response.status</code>å±æ€§ï¼Œå¾—åˆ° HTTP å›åº”çš„çœŸå®çŠ¶æ€ç ï¼Œæ‰èƒ½åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchText</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/readme.txt&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (response.status &gt;= <span class="number">200</span> &amp;&amp; response.status &lt; <span class="number">300</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.text();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>response.status</code>å±æ€§åªæœ‰ç­‰äº 2xx ï¼ˆ200~299ï¼‰ï¼Œæ‰èƒ½è®¤å®šè¯·æ±‚æˆåŠŸã€‚è¿™é‡Œä¸ç”¨è€ƒè™‘ç½‘å€è·³è½¬ï¼ˆçŠ¶æ€ç ä¸º 3xxï¼‰ï¼Œå› ä¸º<code>fetch()</code>ä¼šå°†è·³è½¬çš„çŠ¶æ€ç è‡ªåŠ¨è½¬ä¸º 200ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ³•æ˜¯åˆ¤æ–­<code>response.ok</code>æ˜¯å¦ä¸º<code>true</code>ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (response.ok) &#123;</span><br><span class="line">  <span class="comment">// è¯·æ±‚æˆåŠŸ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// è¯·æ±‚å¤±è´¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-3-Response-headers-å±æ€§"><a href="#2-3-Response-headers-å±æ€§" class="headerlink" title="2.3 Response.headers å±æ€§"></a>2.3 Response.headers å±æ€§</h3><p>Response å¯¹è±¡è¿˜æœ‰ä¸€ä¸ª<code>Response.headers</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Headers">Headers å¯¹è±¡</a>ï¼Œå¯¹åº” HTTP å›åº”çš„æ‰€æœ‰æ ‡å¤´ã€‚</p>
<p>Headers å¯¹è±¡å¯ä»¥ä½¿ç”¨<code>for...of</code>å¾ªç¯è¿›è¡Œéå†ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> response.headers) &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span> : <span class="subst">$&#123;value&#125;</span>`</span>);  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> response.headers.entries()) &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span> : <span class="subst">$&#123;value&#125;</span>`</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>Headers å¯¹è±¡æä¾›äº†ä»¥ä¸‹æ–¹æ³•ï¼Œç”¨æ¥æ“ä½œæ ‡å¤´ã€‚</p>
<blockquote>
<ul>
<li><code>Headers.get()</code>ï¼šæ ¹æ®æŒ‡å®šçš„é”®åï¼Œè¿”å›é”®å€¼ã€‚</li>
<li><code>Headers.has()</code>ï¼š è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦åŒ…å«æŸä¸ªæ ‡å¤´ã€‚</li>
<li><code>Headers.set()</code>ï¼šå°†æŒ‡å®šçš„é”®åè®¾ç½®ä¸ºæ–°çš„é”®å€¼ï¼Œå¦‚æœè¯¥é”®åä¸å­˜åœ¨åˆ™ä¼šæ·»åŠ ã€‚</li>
<li><code>Headers.append()</code>ï¼šæ·»åŠ æ ‡å¤´ã€‚</li>
<li><code>Headers.delete()</code>ï¼šåˆ é™¤æ ‡å¤´ã€‚</li>
<li><code>Headers.keys()</code>ï¼šè¿”å›ä¸€ä¸ªéå†å™¨ï¼Œå¯ä»¥ä¾æ¬¡éå†æ‰€æœ‰é”®åã€‚</li>
<li><code>Headers.values()</code>ï¼šè¿”å›ä¸€ä¸ªéå†å™¨ï¼Œå¯ä»¥ä¾æ¬¡éå†æ‰€æœ‰é”®å€¼ã€‚</li>
<li><code>Headers.entries()</code>ï¼šè¿”å›ä¸€ä¸ªéå†å™¨ï¼Œå¯ä»¥ä¾æ¬¡éå†æ‰€æœ‰é”®å€¼å¯¹ï¼ˆ<code>[key, value]</code>ï¼‰ã€‚</li>
<li><code>Headers.forEach()</code>ï¼šä¾æ¬¡éå†æ ‡å¤´ï¼Œæ¯ä¸ªæ ‡å¤´éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡å‚æ•°å‡½æ•°ã€‚</li>
</ul>
</blockquote>
<p>ä¸Šé¢çš„æœ‰äº›æ–¹æ³•å¯ä»¥ä¿®æ”¹æ ‡å¤´ï¼Œé‚£æ˜¯å› ä¸ºç»§æ‰¿è‡ª Headers æ¥å£ã€‚å¯¹äº HTTP å›åº”æ¥è¯´ï¼Œä¿®æ”¹æ ‡å¤´æ„ä¹‰ä¸å¤§ï¼Œå†µä¸”å¾ˆå¤šæ ‡å¤´æ˜¯åªè¯»çš„ï¼Œæµè§ˆå™¨ä¸å…è®¸ä¿®æ”¹ã€‚</p>
<p>è¿™äº›æ–¹æ³•ä¸­ï¼Œæœ€å¸¸ç”¨çš„æ˜¯<code>response.headers.get()</code>ï¼Œç”¨äºè¯»å–æŸä¸ªæ ‡å¤´çš„å€¼ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> response =  <span class="keyword">await</span>  fetch(url);  </span><br><span class="line">response.headers.get(<span class="string">&#x27;Content-Type&#x27;</span>)</span><br><span class="line"><span class="comment">// application/json; charset=utf-8</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>Headers.keys()</code>å’Œ<code>Headers.values()</code>æ–¹æ³•ç”¨æ¥åˆ†åˆ«éå†æ ‡å¤´çš„é”®åå’Œé”®å€¼ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”®å</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> myHeaders.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”®å€¼</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> value <span class="keyword">of</span> myHeaders.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>Headers.forEach()</code>æ–¹æ³•ä¹Ÿå¯ä»¥éå†æ‰€æœ‰çš„é”®å€¼å’Œé”®åã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line">response.headers.forEach(</span><br><span class="line">  <span class="function">(<span class="params">value, key</span>) =&gt;</span> <span class="built_in">console</span>.log(key, <span class="string">&#x27;:&#x27;</span>, value)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-4-è¯»å–å†…å®¹çš„æ–¹æ³•"><a href="#2-4-è¯»å–å†…å®¹çš„æ–¹æ³•" class="headerlink" title="2.4 è¯»å–å†…å®¹çš„æ–¹æ³•"></a>2.4 è¯»å–å†…å®¹çš„æ–¹æ³•</h3><p><code>Response</code>å¯¹è±¡æ ¹æ®æœåŠ¡å™¨è¿”å›çš„ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæä¾›äº†ä¸åŒçš„è¯»å–æ–¹æ³•ã€‚</p>
<blockquote>
<ul>
<li><code>response.text()</code>ï¼šå¾—åˆ°æ–‡æœ¬å­—ç¬¦ä¸²ã€‚</li>
<li><code>response.json()</code>ï¼šå¾—åˆ° JSON å¯¹è±¡ã€‚</li>
<li><code>response.blob()</code>ï¼šå¾—åˆ°äºŒè¿›åˆ¶ Blob å¯¹è±¡ã€‚</li>
<li><code>response.formData()</code>ï¼šå¾—åˆ° FormData è¡¨å•å¯¹è±¡ã€‚</li>
<li><code>response.arrayBuffer()</code>ï¼šå¾—åˆ°äºŒè¿›åˆ¶ ArrayBuffer å¯¹è±¡ã€‚</li>
</ul>
</blockquote>
<p>ä¸Šé¢5ä¸ªè¯»å–æ–¹æ³•éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œè¿”å›çš„éƒ½æ˜¯ Promise å¯¹è±¡ã€‚å¿…é¡»ç­‰åˆ°å¼‚æ­¥æ“ä½œç»“æŸï¼Œæ‰èƒ½å¾—åˆ°æœåŠ¡å™¨è¿”å›çš„å®Œæ•´æ•°æ®ã€‚</p>
<p><strong>response.text()</strong></p>
<p><code>response.text()</code>å¯ä»¥ç”¨äºè·å–æ–‡æœ¬æ•°æ®ï¼Œæ¯”å¦‚ HTML æ–‡ä»¶ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/users.html&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> body = <span class="keyword">await</span> response.text();</span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = body</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>response.json()</strong></p>
<p><code>response.json()</code>ä¸»è¦ç”¨äºè·å–æœåŠ¡å™¨è¿”å›çš„ JSON æ•°æ®ï¼Œå‰é¢å·²ç»ä¸¾è¿‡ä¾‹å­äº†ã€‚</p>
<p><strong>response.formData()</strong></p>
<p><code>response.formData()</code>ä¸»è¦ç”¨åœ¨ Service Worker é‡Œé¢ï¼Œæ‹¦æˆªç”¨æˆ·æäº¤çš„è¡¨å•ï¼Œä¿®æ”¹æŸäº›æ•°æ®ä»¥åï¼Œå†æäº¤ç»™æœåŠ¡å™¨ã€‚</p>
<p><strong>response.blob()</strong></p>
<p><code>response.blob()</code>ç”¨äºè·å–äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;flower.jpg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> myBlob = <span class="keyword">await</span> response.blob();</span><br><span class="line"><span class="keyword">const</span> objectURL = URL.createObjectURL(myBlob);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myImage = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line">myImage.src = objectURL;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹è¯»å–å›¾ç‰‡æ–‡ä»¶<code>flower.jpg</code>ï¼Œæ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šã€‚</p>
<p><strong>response.arrayBuffer()</strong></p>
<p><code>response.arrayBuffer()</code>ä¸»è¦ç”¨äºè·å–æµåª’ä½“æ–‡ä»¶ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> audioCtx = <span class="keyword">new</span> <span class="built_in">window</span>.AudioContext();</span><br><span class="line"><span class="keyword">const</span> source = audioCtx.createBufferSource();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;song.ogg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> buffer = <span class="keyword">await</span> response.arrayBuffer();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> decodeData = <span class="keyword">await</span> audioCtx.decodeAudioData(buffer);</span><br><span class="line">source.buffer = buffer;</span><br><span class="line">source.connect(audioCtx.destination);</span><br><span class="line">source.loop = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹æ˜¯<code>response.arrayBuffer()</code>è·å–éŸ³é¢‘æ–‡ä»¶<code>song.ogg</code>ï¼Œç„¶ååœ¨çº¿æ’­æ”¾çš„ä¾‹å­ã€‚</p>
<h3 id="2-5-Response-clone"><a href="#2-5-Response-clone" class="headerlink" title="2.5 Response.clone()"></a>2.5 Response.clone()</h3><p>Stream å¯¹è±¡åªèƒ½è¯»å–ä¸€æ¬¡ï¼Œè¯»å–å®Œå°±æ²¡äº†ã€‚è¿™æ„å‘³ç€ï¼Œå‰ä¸€èŠ‚çš„äº”ä¸ªè¯»å–æ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨ä¸€ä¸ªï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> text =  <span class="keyword">await</span> response.text();</span><br><span class="line"><span class="keyword">let</span> json =  <span class="keyword">await</span> response.json();  <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹å…ˆä½¿ç”¨äº†<code>response.text()</code>ï¼Œå°±æŠŠ Stream è¯»å®Œäº†ã€‚åé¢å†è°ƒç”¨<code>response.json()</code>ï¼Œå°±æ²¡æœ‰å†…å®¹å¯è¯»äº†ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚</p>
<p>Response å¯¹è±¡æä¾›<code>Response.clone()</code>æ–¹æ³•ï¼Œåˆ›å»º<code>Response</code>å¯¹è±¡çš„å‰¯æœ¬ï¼Œå®ç°å¤šæ¬¡è¯»å–ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response1 = <span class="keyword">await</span> fetch(<span class="string">&#x27;flowers.jpg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> response2 = response1.clone();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myBlob1 = <span class="keyword">await</span> response1.blob();</span><br><span class="line"><span class="keyword">const</span> myBlob2 = <span class="keyword">await</span> response2.blob();</span><br><span class="line"></span><br><span class="line">image1.src = URL.createObjectURL(myBlob1);</span><br><span class="line">image2.src = URL.createObjectURL(myBlob2);</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>response.clone()</code>å¤åˆ¶äº†ä¸€ä»½ Response å¯¹è±¡ï¼Œç„¶åå°†åŒä¸€å¼ å›¾ç‰‡è¯»å–äº†ä¸¤æ¬¡ã€‚</p>
<p>Response å¯¹è±¡è¿˜æœ‰ä¸€ä¸ª<code>Response.redirect()</code>æ–¹æ³•ï¼Œç”¨äºå°† Response ç»“æœé‡å®šå‘åˆ°æŒ‡å®šçš„ URLã€‚è¯¥æ–¹æ³•ä¸€èˆ¬åªç”¨åœ¨ Service Worker é‡Œé¢ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚</p>
<h3 id="2-6-Response-body-å±æ€§"><a href="#2-6-Response-body-å±æ€§" class="headerlink" title="2.6 Response.body å±æ€§"></a>2.6 Response.body å±æ€§</h3><p><code>Response.body</code>å±æ€§æ˜¯ Response å¯¹è±¡æš´éœ²å‡ºçš„åº•å±‚æ¥å£ï¼Œè¿”å›ä¸€ä¸ª ReadableStream å¯¹è±¡ï¼Œä¾›ç”¨æˆ·æ“ä½œã€‚</p>
<p>å®ƒå¯ä»¥ç”¨æ¥åˆ†å—è¯»å–å†…å®¹ï¼Œåº”ç”¨ä¹‹ä¸€å°±æ˜¯æ˜¾ç¤ºä¸‹è½½çš„è¿›åº¦ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;flower.jpg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> reader = response.body.getReader();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;done, value&#125; = <span class="keyword">await</span> reader.read();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (done) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;value.length&#125;</span> bytes`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>response.body.getReader()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªéå†å™¨ã€‚è¿™ä¸ªéå†å™¨çš„<code>read()</code>æ–¹æ³•æ¯æ¬¡è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºæœ¬æ¬¡è¯»å–çš„å†…å®¹å—ã€‚</p>
<p>è¿™ä¸ªå¯¹è±¡çš„<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥åˆ¤æ–­æœ‰æ²¡æœ‰è¯»å®Œï¼›<code>value</code>å±æ€§æ˜¯ä¸€ä¸ª arrayBuffer æ•°ç»„ï¼Œè¡¨ç¤ºå†…å®¹å—çš„å†…å®¹ï¼Œè€Œ<code>value.length</code>å±æ€§æ˜¯å½“å‰å—çš„å¤§å°ã€‚</p>
<h2 id="ä¸‰ã€fetch-çš„ç¬¬äºŒä¸ªå‚æ•°ï¼šå®šåˆ¶-HTTP-è¯·æ±‚"><a href="#ä¸‰ã€fetch-çš„ç¬¬äºŒä¸ªå‚æ•°ï¼šå®šåˆ¶-HTTP-è¯·æ±‚" class="headerlink" title="ä¸‰ã€fetch()çš„ç¬¬äºŒä¸ªå‚æ•°ï¼šå®šåˆ¶ HTTP è¯·æ±‚"></a>ä¸‰ã€<code>fetch()</code>çš„ç¬¬äºŒä¸ªå‚æ•°ï¼šå®šåˆ¶ HTTP è¯·æ±‚</h2><p><code>fetch()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ URLï¼Œè¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œä¸ºé…ç½®å¯¹è±¡ï¼Œå®šåˆ¶å‘å‡ºçš„ HTTP è¯·æ±‚ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fetch(url, optionObj)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢å‘½ä»¤çš„<code>optionObj</code>å°±æ˜¯ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>
<p>HTTP è¯·æ±‚çš„æ–¹æ³•ã€æ ‡å¤´ã€æ•°æ®ä½“éƒ½åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢è®¾ç½®ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰POST è¯·æ±‚</strong></p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="string">&#x27;foo=bar&amp;lorem=ipsum&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> json = <span class="keyword">await</span> response.json();</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œé…ç½®å¯¹è±¡ç”¨åˆ°äº†ä¸‰ä¸ªå±æ€§ã€‚</p>
<blockquote>
<ul>
<li><code>method</code>ï¼šHTTP è¯·æ±‚çš„æ–¹æ³•ï¼Œ<code>POST</code>ã€<code>DELETE</code>ã€<code>PUT</code>éƒ½åœ¨è¿™ä¸ªå±æ€§è®¾ç½®ã€‚</li>
<li><code>headers</code>ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å®šåˆ¶ HTTP è¯·æ±‚çš„æ ‡å¤´ã€‚</li>
<li><code>body</code>ï¼šPOST è¯·æ±‚çš„æ•°æ®ä½“ã€‚</li>
</ul>
</blockquote>
<p>æ³¨æ„ï¼Œæœ‰äº›æ ‡å¤´ä¸èƒ½é€šè¿‡<code>headers</code>å±æ€§è®¾ç½®ï¼Œæ¯”å¦‚<code>Content-Length</code>ã€<code>Cookie</code>ã€<code>Host</code>ç­‰ç­‰ã€‚å®ƒä»¬æ˜¯ç”±æµè§ˆå™¨è‡ªåŠ¨ç”Ÿæˆï¼Œæ— æ³•ä¿®æ”¹ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰æäº¤ JSON æ•°æ®</strong></p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user =  &#123; <span class="attr">name</span>:  <span class="string">&#x27;John&#x27;</span>, <span class="attr">surname</span>:  <span class="string">&#x27;Smith&#x27;</span>  &#125;;</span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/article/fetch/post/user&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">   <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span></span><br><span class="line">  &#125;, </span><br><span class="line">  <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(user) </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæ ‡å¤´<code>Content-Type</code>è¦è®¾æˆ<code>&#39;application/json;charset=utf-8&#39;</code>ã€‚å› ä¸ºé»˜è®¤å‘é€çš„æ˜¯çº¯æ–‡æœ¬ï¼Œ<code>Content-Type</code>çš„é»˜è®¤å€¼æ˜¯<code>&#39;text/plain;charset=UTF-8&#39;</code>ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰æäº¤è¡¨å•</strong></p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> form = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;form&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/users&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">body</span>: <span class="keyword">new</span> FormData(form)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>ï¼ˆ4ï¼‰æ–‡ä»¶ä¸Šä¼ </strong></p>
<p>å¦‚æœè¡¨å•é‡Œé¢æœ‰æ–‡ä»¶é€‰æ‹©å™¨ï¼Œå¯ä»¥ç”¨å‰ä¸€ä¸ªä¾‹å­çš„å†™æ³•ï¼Œä¸Šä¼ çš„æ–‡ä»¶åŒ…å«åœ¨æ•´ä¸ªè¡¨å•é‡Œé¢ï¼Œä¸€èµ·æäº¤ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ³•æ˜¯ç”¨è„šæœ¬æ·»åŠ æ–‡ä»¶ï¼Œæ„é€ å‡ºä¸€ä¸ªè¡¨å•ï¼Œè¿›è¡Œä¸Šä¼ ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> input = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;input[type=&quot;file&quot;]&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">new</span> FormData();</span><br><span class="line">data.append(<span class="string">&#x27;file&#x27;</span>, input.files[<span class="number">0</span>]);</span><br><span class="line">data.append(<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fetch(<span class="string">&#x27;/avatars&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">body</span>: data</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œä¸ç”¨ä¿®æ”¹æ ‡å¤´çš„<code>Content-Type</code>ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è®¾ç½®ã€‚</p>
<p><strong>ï¼ˆ5ï¼‰ç›´æ¥ä¸Šä¼ äºŒè¿›åˆ¶æ•°æ®</strong></p>
<p><code>fetch()</code>ä¹Ÿå¯ä»¥ç›´æ¥ä¸Šä¼ äºŒè¿›åˆ¶æ•°æ®ï¼Œå°† Blob æˆ– arrayBuffer æ•°æ®æ”¾åœ¨<code>body</code>å±æ€§é‡Œé¢ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> blob = <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span>   </span><br><span class="line">  canvasElem.toBlob(resolve,  <span class="string">&#x27;image/png&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/article/fetch/post/image&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>:  <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">body</span>: blob</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="å››ã€fetch-é…ç½®å¯¹è±¡çš„å®Œæ•´-API"><a href="#å››ã€fetch-é…ç½®å¯¹è±¡çš„å®Œæ•´-API" class="headerlink" title="å››ã€fetch()é…ç½®å¯¹è±¡çš„å®Œæ•´ API"></a>å››ã€<code>fetch()</code>é…ç½®å¯¹è±¡çš„å®Œæ•´ API</h2><p><code>fetch()</code>ç¬¬äºŒä¸ªå‚æ•°çš„å®Œæ•´ API å¦‚ä¸‹ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response = fetch(url, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain;charset=UTF-8&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">referrer</span>: <span class="string">&quot;about:client&quot;</span>,</span><br><span class="line">  <span class="attr">referrerPolicy</span>: <span class="string">&quot;no-referrer-when-downgrade&quot;</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;cors&quot;</span>, </span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&quot;same-origin&quot;</span>,</span><br><span class="line">  <span class="attr">cache</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">  <span class="attr">redirect</span>: <span class="string">&quot;follow&quot;</span>,</span><br><span class="line">  <span class="attr">integrity</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">keepalive</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">signal</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>fetch()</code>è¯·æ±‚çš„åº•å±‚ç”¨çš„æ˜¯ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">Request() å¯¹è±¡</a>çš„æ¥å£ï¼Œå‚æ•°å®Œå…¨ä¸€æ ·ï¼Œå› æ­¤ä¸Šé¢çš„ API ä¹Ÿæ˜¯<code>Request()</code>çš„ APIã€‚</p>
<p>è¿™äº›å±æ€§é‡Œé¢ï¼Œ<code>headers</code>ã€<code>body</code>ã€<code>method</code>å‰é¢å·²ç»ç»™è¿‡ç¤ºä¾‹äº†ï¼Œä¸‹é¢æ˜¯å…¶ä»–å±æ€§çš„ä»‹ç»ã€‚</p>
<p><strong>cache</strong></p>
<p><code>cache</code>å±æ€§æŒ‡å®šå¦‚ä½•å¤„ç†ç¼“å­˜ã€‚å¯èƒ½çš„å–å€¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li><code>default</code>ï¼šé»˜è®¤å€¼ï¼Œå…ˆåœ¨ç¼“å­˜é‡Œé¢å¯»æ‰¾åŒ¹é…çš„è¯·æ±‚ã€‚</li>
<li><code>no-store</code>ï¼šç›´æ¥è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¸æ›´æ–°ç¼“å­˜ã€‚</li>
<li><code>reload</code>ï¼šç›´æ¥è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨ï¼Œå¹¶ä¸”æ›´æ–°ç¼“å­˜ã€‚</li>
<li><code>no-cache</code>ï¼šå°†æœåŠ¡å™¨èµ„æºè·Ÿæœ¬åœ°ç¼“å­˜è¿›è¡Œæ¯”è¾ƒï¼Œæœ‰æ–°çš„ç‰ˆæœ¬æ‰ä½¿ç”¨æœåŠ¡å™¨èµ„æºï¼Œå¦åˆ™ä½¿ç”¨ç¼“å­˜ã€‚</li>
<li><code>force-cache</code>ï¼šç¼“å­˜ä¼˜å…ˆï¼Œåªæœ‰ä¸å­˜åœ¨ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæ‰è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨ã€‚</li>
<li><code>only-if-cached</code>ï¼šåªæ£€æŸ¥ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜é‡Œé¢ä¸å­˜åœ¨ï¼Œå°†è¿”å›504é”™è¯¯ã€‚</li>
</ul>
</blockquote>
<p><strong>mode</strong></p>
<p><code>mode</code>å±æ€§æŒ‡å®šè¯·æ±‚çš„æ¨¡å¼ã€‚å¯èƒ½çš„å–å€¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li><code>cors</code>ï¼šé»˜è®¤å€¼ï¼Œå…è®¸è·¨åŸŸè¯·æ±‚ã€‚</li>
<li><code>same-origin</code>ï¼šåªå…è®¸åŒæºè¯·æ±‚ã€‚</li>
<li><code>no-cors</code>ï¼šè¯·æ±‚æ–¹æ³•åªé™äº GETã€POST å’Œ HEADï¼Œå¹¶ä¸”åªèƒ½ä½¿ç”¨æœ‰é™çš„å‡ ä¸ªç®€å•æ ‡å¤´ï¼Œä¸èƒ½æ·»åŠ è·¨åŸŸçš„å¤æ‚æ ‡å¤´ï¼Œç›¸å½“äºæäº¤è¡¨å•æ‰€èƒ½å‘å‡ºçš„è¯·æ±‚ã€‚</li>
</ul>
</blockquote>
<p><strong>credentials</strong></p>
<p><code>credentials</code>å±æ€§æŒ‡å®šæ˜¯å¦å‘é€ Cookieã€‚å¯èƒ½çš„å–å€¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li><code>same-origin</code>ï¼šé»˜è®¤å€¼ï¼ŒåŒæºè¯·æ±‚æ—¶å‘é€ Cookieï¼Œè·¨åŸŸè¯·æ±‚æ—¶ä¸å‘é€ã€‚</li>
<li><code>include</code>ï¼šä¸ç®¡åŒæºè¯·æ±‚ï¼Œè¿˜æ˜¯è·¨åŸŸè¯·æ±‚ï¼Œä¸€å¾‹å‘é€ Cookieã€‚</li>
<li><code>omit</code>ï¼šä¸€å¾‹ä¸å‘é€ã€‚</li>
</ul>
</blockquote>
<p>è·¨åŸŸè¯·æ±‚å‘é€ Cookieï¼Œéœ€è¦å°†<code>credentials</code>å±æ€§è®¾ä¸º<code>include</code>ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;http://another.com&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&quot;include&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>signal</strong></p>
<p><code>signal</code>å±æ€§æŒ‡å®šä¸€ä¸ª AbortSignal å®ä¾‹ï¼Œç”¨äºå–æ¶ˆ<code>fetch()</code>è¯·æ±‚ï¼Œè¯¦è§ä¸‹ä¸€èŠ‚ã€‚</p>
<p><strong>keepalive</strong></p>
<p><code>keepalive</code>å±æ€§ç”¨äºé¡µé¢å¸è½½æ—¶ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨åå°ä¿æŒè¿æ¥ï¼Œç»§ç»­å‘é€æ•°æ®ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„åœºæ™¯å°±æ˜¯ï¼Œç”¨æˆ·ç¦»å¼€ç½‘é¡µæ—¶ï¼Œè„šæœ¬å‘æœåŠ¡å™¨æäº¤ä¸€äº›ç”¨æˆ·è¡Œä¸ºçš„ç»Ÿè®¡ä¿¡æ¯ã€‚è¿™æ—¶ï¼Œå¦‚æœä¸ç”¨<code>keepalive</code>å±æ€§ï¼Œæ•°æ®å¯èƒ½æ— æ³•å‘é€ï¼Œå› ä¸ºæµè§ˆå™¨å·²ç»æŠŠé¡µé¢å¸è½½äº†ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onunload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  fetch(<span class="string">&#x27;/analytics&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&quot;statistics&quot;</span>,</span><br><span class="line">    <span class="attr">keepalive</span>: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>redirect</strong></p>
<p><code>redirect</code>å±æ€§æŒ‡å®š HTTP è·³è½¬çš„å¤„ç†æ–¹æ³•ã€‚å¯èƒ½çš„å–å€¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li><code>follow</code>ï¼šé»˜è®¤å€¼ï¼Œ<code>fetch()</code>è·Ÿéš HTTP è·³è½¬ã€‚</li>
<li><code>error</code>ï¼šå¦‚æœå‘ç”Ÿè·³è½¬ï¼Œ<code>fetch()</code>å°±æŠ¥é”™ã€‚</li>
<li><code>manual</code>ï¼š<code>fetch()</code>ä¸è·Ÿéš HTTP è·³è½¬ï¼Œä½†æ˜¯<code>response.url</code>å±æ€§ä¼šæŒ‡å‘æ–°çš„ URLï¼Œ<code>response.redirected</code>å±æ€§ä¼šå˜ä¸º<code>true</code>ï¼Œç”±å¼€å‘è€…è‡ªå·±å†³å®šåç»­å¦‚ä½•å¤„ç†è·³è½¬ã€‚</li>
</ul>
</blockquote>
<p><strong>integrity</strong></p>
<p><code>integrity</code>å±æ€§æŒ‡å®šä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œç”¨äºæ£€æŸ¥ HTTP å›åº”ä¼ å›çš„æ•°æ®æ˜¯å¦ç­‰äºè¿™ä¸ªé¢„å…ˆè®¾å®šçš„å“ˆå¸Œå€¼ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸‹è½½æ–‡ä»¶æ—¶ï¼Œæ£€æŸ¥æ–‡ä»¶çš„ SHA-256 å“ˆå¸Œå€¼æ˜¯å¦ç›¸ç¬¦ï¼Œç¡®ä¿æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;http://site.com/file&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">integrity</span>: <span class="string">&#x27;sha256-abcdef&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>referrer</strong></p>
<p><code>referrer</code>å±æ€§ç”¨äºè®¾å®š<code>fetch()</code>è¯·æ±‚çš„<code>referer</code>æ ‡å¤´ã€‚</p>
<p>è¿™ä¸ªå±æ€§å¯ä»¥ä¸ºä»»æ„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è®¾ä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆå³ä¸å‘é€<code>referer</code>æ ‡å¤´ï¼‰ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;/page&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">referrer</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>referrerPolicy</strong></p>
<p><code>referrerPolicy</code>å±æ€§ç”¨äºè®¾å®š<code>Referer</code>æ ‡å¤´çš„è§„åˆ™ã€‚å¯èƒ½çš„å–å€¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li><code>no-referrer-when-downgrade</code>ï¼šé»˜è®¤å€¼ï¼Œæ€»æ˜¯å‘é€<code>Referer</code>æ ‡å¤´ï¼Œé™¤éä» HTTPS é¡µé¢è¯·æ±‚ HTTP èµ„æºæ—¶ä¸å‘é€ã€‚</li>
<li><code>no-referrer</code>ï¼šä¸å‘é€<code>Referer</code>æ ‡å¤´ã€‚</li>
<li><code>origin</code>ï¼š<code>Referer</code>æ ‡å¤´åªåŒ…å«åŸŸåï¼Œä¸åŒ…å«å®Œæ•´çš„è·¯å¾„ã€‚</li>
<li><code>origin-when-cross-origin</code>ï¼šåŒæºè¯·æ±‚<code>Referer</code>æ ‡å¤´åŒ…å«å®Œæ•´çš„è·¯å¾„ï¼Œè·¨åŸŸè¯·æ±‚åªåŒ…å«åŸŸåã€‚</li>
<li><code>same-origin</code>ï¼šè·¨åŸŸè¯·æ±‚ä¸å‘é€<code>Referer</code>ï¼ŒåŒæºè¯·æ±‚å‘é€ã€‚</li>
<li><code>strict-origin</code>ï¼š<code>Referer</code>æ ‡å¤´åªåŒ…å«åŸŸåï¼ŒHTTPS é¡µé¢è¯·æ±‚ HTTP èµ„æºæ—¶ä¸å‘é€<code>Referer</code>æ ‡å¤´ã€‚</li>
<li><code>strict-origin-when-cross-origin</code>ï¼šåŒæºè¯·æ±‚æ—¶<code>Referer</code>æ ‡å¤´åŒ…å«å®Œæ•´è·¯å¾„ï¼Œè·¨åŸŸè¯·æ±‚æ—¶åªåŒ…å«åŸŸåï¼ŒHTTPS é¡µé¢è¯·æ±‚ HTTP èµ„æºæ—¶ä¸å‘é€è¯¥æ ‡å¤´ã€‚</li>
<li><code>unsafe-url</code>ï¼šä¸ç®¡ä»€ä¹ˆæƒ…å†µï¼Œæ€»æ˜¯å‘é€<code>Referer</code>æ ‡å¤´ã€‚</li>
</ul>
</blockquote>
<h2 id="äº”ã€å–æ¶ˆfetch-è¯·æ±‚"><a href="#äº”ã€å–æ¶ˆfetch-è¯·æ±‚" class="headerlink" title="äº”ã€å–æ¶ˆfetch()è¯·æ±‚"></a>äº”ã€å–æ¶ˆ<code>fetch()</code>è¯·æ±‚</h2><p><code>fetch()</code>è¯·æ±‚å‘é€ä»¥åï¼Œå¦‚æœä¸­é€”æƒ³è¦å–æ¶ˆï¼Œéœ€è¦ä½¿ç”¨<code>AbortController</code>å¯¹è±¡ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"><span class="keyword">let</span> signal = controller.signal;</span><br><span class="line"></span><br><span class="line">fetch(url, &#123;</span><br><span class="line">  <span class="attr">signal</span>: controller.signal</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">signal.addEventListener(<span class="string">&#x27;abort&#x27;</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;abort!&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">controller.abort(); <span class="comment">// å–æ¶ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(signal.aborted); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œé¦–å…ˆæ–°å»º AbortController å®ä¾‹ï¼Œç„¶åå‘é€<code>fetch()</code>è¯·æ±‚ï¼Œé…ç½®å¯¹è±¡çš„<code>signal</code>å±æ€§å¿…é¡»æŒ‡å®šæ¥æ”¶ AbortController å®ä¾‹å‘é€çš„ä¿¡å·<code>controller.signal</code>ã€‚</p>
<p><code>controller.abort()</code>æ–¹æ³•ç”¨äºå‘å‡ºå–æ¶ˆä¿¡å·ã€‚è¿™æ—¶ä¼šè§¦å‘<code>abort</code>äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶å¯ä»¥ç›‘å¬ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>controller.signal.aborted</code>å±æ€§åˆ¤æ–­å–æ¶ˆä¿¡å·æ˜¯å¦å·²ç»å‘å‡ºã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª1ç§’åè‡ªåŠ¨å–æ¶ˆè¯·æ±‚çš„ä¾‹å­ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> controller = <span class="keyword">new</span> AbortController();</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> controller.abort(), <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;/long-operation&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">signal</span>: controller.signal</span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.name == <span class="string">&#x27;AbortError&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Aborted!&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/15/15-cors%E8%B7%A8%E5%9F%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/15/15-cors%E8%B7%A8%E5%9F%9F/" class="post-title-link" itemprop="url">15-corsè·¨åŸŸ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-15 21:44:40" itemprop="dateCreated datePublished" datetime="2021-09-15T21:44:40+08:00">2021-09-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-16 09:04:16" itemprop="dateModified" datetime="2021-09-16T09:04:16+08:00">2021-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" itemprop="url" rel="index"><span itemprop="name">ç½‘ç»œè¯·æ±‚</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="â‘ ä¸¤ç§è¯·æ±‚"><a href="#â‘ ä¸¤ç§è¯·æ±‚" class="headerlink" title="â‘ ä¸¤ç§è¯·æ±‚"></a>â‘ ä¸¤ç§è¯·æ±‚</h2><h3 id="1-ç®€å•è¯·æ±‚"><a href="#1-ç®€å•è¯·æ±‚" class="headerlink" title="1.ç®€å•è¯·æ±‚"></a>1.ç®€å•è¯·æ±‚</h3><p>ï¼ˆ1) è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ï¼š</p>
<ul>
<li>HEAD</li>
<li>GET</li>
<li>POST</li>
</ul>
<p>ï¼ˆ2ï¼‰HTTPçš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š</p>
<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Last-Event-ID</li>
<li>Content-Typeï¼šåªé™äºä¸‰ä¸ªå€¼<code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>text/plain</code></li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/15/15-cors%E8%B7%A8%E5%9F%9F/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/15/14-%E6%87%92%E5%8A%A0%E8%BD%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/15/14-%E6%87%92%E5%8A%A0%E8%BD%BD/" class="post-title-link" itemprop="url">14-æ‡’åŠ è½½</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-15 17:36:46" itemprop="dateCreated datePublished" datetime="2021-09-15T17:36:46+08:00">2021-09-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-24 18:01:10" itemprop="dateModified" datetime="2021-09-24T18:01:10+08:00">2021-09-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">æ€§èƒ½ä¼˜åŒ–</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lazyLoad = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> img = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> viewHeight = <span class="built_in">document</span>.documentElement.clientHeight <span class="comment">// å¯è§†çª—å£é«˜åº¦</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; img.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(img[i].getBoundingClientRect().top &lt; viewHeight) &#123; <span class="comment">// get...å›¾ç‰‡è·ç¦»å¯è§†çª—å£çš„é«˜åº¦</span></span><br><span class="line">      img.src = img.getAttribute(<span class="string">&#x27;data-src&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/15/14-%E6%87%92%E5%8A%A0%E8%BD%BD/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yummy-zz.github.io/2021/09/15/13-promise%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Eden Yi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yum">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/15/13-promise%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">13-promiseè¯¦è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-09-15 08:01:28" itemprop="dateCreated datePublished" datetime="2021-09-15T08:01:28+08:00">2021-09-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-16 09:06:01" itemprop="dateModified" datetime="2021-09-16T09:06:01+08:00">2021-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ğŸ“Œè¡¥å……ï¼š</p>
<h2 id="â‘ -Promise-åŸºæœ¬åŸç†"><a href="#â‘ -Promise-åŸºæœ¬åŸç†" class="headerlink" title="â‘ .Promise åŸºæœ¬åŸç†"></a>â‘ .Promise åŸºæœ¬åŸç†</h2><p>ğŸµPromise æ˜¯ä¸€ä¸ªç±»ï¼Œåœ¨æ‰§è¡Œè¿™ä¸ªç±»çš„æ—¶å€™ä¼šä¼ å…¥ä¸€ä¸ªæ‰§è¡Œå™¨ï¼Œè¿™ä¸ªæ‰§è¡Œå™¨ä¼šç«‹å³æ‰§è¡Œ</p>
<p>ğŸ™ˆPromise ä¼šæœ‰ä¸‰ç§çŠ¶æ€</p>
<ul>
<li>Pending ç­‰å¾…</li>
<li>Fulfilled å®Œæˆ</li>
<li>Rejected å¤±è´¥</li>
</ul>
<p>ğŸ™‰çŠ¶æ€åªèƒ½ç”± Pending â€“&gt; Fulfilled æˆ–è€… Pending â€“&gt; Rejectedï¼Œä¸”ä¸€ä½†å‘ç”Ÿæ”¹å˜ä¾¿ä¸å¯äºŒæ¬¡ä¿®æ”¹ï¼›</p>
<p>ğŸ™ŠPromise ä¸­ä½¿ç”¨ resolve å’Œ reject ä¸¤ä¸ªå‡½æ•°æ¥æ›´æ”¹çŠ¶æ€ï¼›</p>
<p>ğŸ’then æ–¹æ³•å†…éƒ¨åšä½†äº‹æƒ…å°±æ˜¯çŠ¶æ€åˆ¤æ–­</p>
<ul>
<li>å¦‚æœçŠ¶æ€æ˜¯æˆåŠŸï¼Œè°ƒç”¨æˆåŠŸå›è°ƒå‡½æ•°</li>
<li>å¦‚æœçŠ¶æ€æ˜¯å¤±è´¥ï¼Œè°ƒç”¨å¤±è´¥å›è°ƒå‡½æ•°</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/15/13-promise%E8%AF%A6%E8%A7%A3/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Eden Yi"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Eden Yi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Yummy-zZ" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Yummy-zZ" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yjh2412750872@gmail.com" title="E-Mail â†’ mailto:yjh2412750872@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eden Yi</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div><script color="66,197,172" opacity="0.85" zIndex="-1" count="88" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>


  















  

  

</body>
</html>
